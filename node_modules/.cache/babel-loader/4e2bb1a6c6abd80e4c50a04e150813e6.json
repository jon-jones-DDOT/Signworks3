{"ast":null,"code":"import _classCallCheck from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Projects\\\\Signworks3\\\\src\\\\components\\\\myModules\\\\SuperQuery.js\";\nimport React, { Component } from 'react';\nimport './SuperQuery.css';\nimport ModalWrapper from './Modals/ModalWrapper';\nimport { layerURLs } from '../../utils/JSAPI';\nimport Autocomplete from 'react-autocomplete'; //import {SupportType, addOptionsToSelect} from '../../../SignworksJSON';\n\nvar SuperQuery =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SuperQuery, _Component);\n\n  function SuperQuery(props) {\n    var _this;\n\n    _classCallCheck(this, SuperQuery);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SuperQuery).call(this, props));\n\n    _this.getOptions = function () {\n      var bob = [];\n\n      for (var i = 0; i < _this.props.map.muttArray.length; i++) {\n        bob.push(_this.props.map.muttArray[i].code + \": \" + _this.props.map.muttArray[i].name);\n      }\n\n      return bob;\n    };\n\n    _this.mutcdLookUpSelectHandler = function (desc) {\n      var option = desc.split(':');\n\n      _this.setState({\n        selectedMutt: option[0],\n        selected: true\n      });\n\n      _this.myRef.current.focus();\n    };\n\n    _this.cancelClickHandler = function () {\n      _this.props.modalClicked(false, null);\n    };\n\n    _this.searchClickHandler = function (evt) {\n      // when this finally breaks , remember to check and see if they updated the\n      // table to 'SIGNCODE'\n      _this.props.removeQueryGraphics();\n\n      var where = \"SUPPORTSTATUS = 1 AND SIGNSTATUS = 1 AND MUTCD='\" + _this.state.selectedMutt + \"'\";\n      var extent = _this.props.map.extent;\n      var layer = layerURLs(_this.props).superquery;\n\n      _this.props.querySuperQuery(where, extent, layer);\n    };\n\n    _this.myRef = React.createRef();\n    _this.state = {\n      selectedMutt: null,\n      selected: false,\n      ready: true,\n      value: ''\n    };\n    return _this;\n  }\n\n  _createClass(SuperQuery, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(ModalWrapper, Object.assign({}, this.props, {\n        title: \"Query\",\n        width: 400,\n        showOk: this.props.showOk,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"SuperQuery\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"SuperQueryCancel\",\n        title: \"Close Window\",\n        onClick: this.cancelClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"X\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"Type a partial MUTCD and select from results\"), React.createElement(ReactAutocomplete, {\n        items: [{\n          id: 'foo',\n          label: 'foo'\n        }, {\n          id: 'bar',\n          label: 'bar'\n        }, {\n          id: 'baz',\n          label: 'baz'\n        }],\n        shouldItemRender: function shouldItemRender(item, value) {\n          return item.label.toLowerCase().indexOf(value.toLowerCase()) > -1;\n        },\n        getItemValue: function getItemValue(item) {\n          return item.label;\n        },\n        renderItem: function renderItem(item, highlighted) {\n          return React.createElement(\"div\", {\n            key: item.id,\n            style: {\n              backgroundColor: highlighted ? '#eee' : 'transparent'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95\n            },\n            __self: this\n          }, item.label);\n        },\n        value: this.state.value,\n        onChange: function onChange(e) {\n          return _this2.setState({\n            value: e.target.value\n          });\n        },\n        onSelect: function onSelect(value) {\n          return _this2.setState({\n            value: value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, this.props.graphic.queryCount, \"\\xA0 features found\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"The Extent for the query will be the current extent of the displayed map\"), React.createElement(\"button\", {\n        ref: this.myRef,\n        onClick: this.searchClickHandler,\n        disabled: this.selected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"SEARCH\")));\n    }\n  }]);\n\n  return SuperQuery;\n}(Component);\n\nexport { SuperQuery as default };","map":{"version":3,"sources":["C:\\Projects\\Signworks3\\src\\components\\myModules\\SuperQuery.js"],"names":["React","Component","ModalWrapper","layerURLs","Autocomplete","SuperQuery","props","getOptions","bob","i","map","muttArray","length","push","code","name","mutcdLookUpSelectHandler","desc","option","split","setState","selectedMutt","selected","myRef","current","focus","cancelClickHandler","modalClicked","searchClickHandler","evt","removeQueryGraphics","where","state","extent","layer","superquery","querySuperQuery","createRef","ready","value","showOk","id","label","item","toLowerCase","indexOf","highlighted","backgroundColor","e","target","graphic","queryCount"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport './SuperQuery.css'\r\nimport ModalWrapper from './Modals/ModalWrapper';\r\nimport {layerURLs} from '../../utils/JSAPI'\r\nimport Autocomplete from 'react-autocomplete'\r\n\r\n//import {SupportType, addOptionsToSelect} from '../../../SignworksJSON';\r\n\r\nexport default class SuperQuery extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.myRef = React.createRef();\r\n        this.state = {\r\n            selectedMutt: null,\r\n            selected: false,\r\n            ready: true,\r\n            value:''\r\n        }\r\n\r\n    }\r\n\r\n    getOptions = () => {\r\n        let bob = [];\r\n        for (let i = 0; i < this.props.map.muttArray.length; i++) {\r\n            bob.push(this.props.map.muttArray[i].code + \": \" + this.props.map.muttArray[i].name)\r\n        }\r\n\r\n        return bob;\r\n\r\n    }\r\n\r\n    mutcdLookUpSelectHandler = (desc) => {\r\n\r\n        let option = desc.split(':')\r\n        this.setState({selectedMutt: option[0], selected: true})\r\n        this\r\n            .myRef\r\n            .current\r\n            .focus();\r\n\r\n    }\r\n\r\n    cancelClickHandler = () => {\r\n\r\n        this\r\n            .props\r\n            .modalClicked(false, null)\r\n    }\r\n\r\n    searchClickHandler = (evt) => {\r\n        // when this finally breaks , remember to check and see if they updated the\r\n        // table to 'SIGNCODE'\r\n        this\r\n            .props\r\n            .removeQueryGraphics();\r\n        const where = \"SUPPORTSTATUS = 1 AND SIGNSTATUS = 1 AND MUTCD='\" + this.state.selectedMutt + \"'\";\r\n        const extent = this.props.map.extent;\r\n        const layer = layerURLs(this.props).superquery;\r\n\r\n        this\r\n            .props\r\n            .querySuperQuery(where, extent, layer)\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n\r\n            <ModalWrapper\r\n                {...this.props}\r\n                title=\"Query\"\r\n                width\r\n                ={400}\r\n                showOk={this.props.showOk}>\r\n\r\n                <div className=\"SuperQuery\">\r\n                    <div\r\n                        className=\"SuperQueryCancel\"\r\n                        title=\"Close Window\"\r\n                        onClick={this.cancelClickHandler}>X</div>\r\n                    <div>\r\n\r\n                        <p>Type a partial MUTCD and select from results</p>\r\n                        <ReactAutocomplete\r\n        items={[\r\n          { id: 'foo', label: 'foo' },\r\n          { id: 'bar', label: 'bar' },\r\n          { id: 'baz', label: 'baz' },\r\n        ]}\r\n        shouldItemRender={(item, value) => item.label.toLowerCase().indexOf(value.toLowerCase()) > -1}\r\n        getItemValue={item => item.label}\r\n        renderItem={(item, highlighted) =>\r\n          <div\r\n            key={item.id}\r\n            style={{ backgroundColor: highlighted ? '#eee' : 'transparent'}}\r\n          >\r\n            {item.label}\r\n          </div>\r\n        }\r\n        value={this.state.value}\r\n        onChange={e => this.setState({ value: e.target.value })}\r\n        onSelect={value => this.setState({ value })}\r\n      />\r\n                    </div>\r\n                    <div>\r\n                        {this.props.graphic.queryCount}\r\n                        &nbsp; features found</div>\r\n                    <p>\r\n                        The Extent for the query will be the current extent of the displayed map</p>\r\n                    < button ref={this.myRef} onClick={this.searchClickHandler} disabled={this.selected}>\r\n                        SEARCH</button>\r\n\r\n                </div>\r\n            </ModalWrapper>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}