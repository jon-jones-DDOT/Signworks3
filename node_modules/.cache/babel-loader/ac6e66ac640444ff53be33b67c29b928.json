{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Projects\\\\Signworks3\\\\src\\\\components\\\\myModules\\\\Signs\\\\SignEditor.js\";\nimport React, { Component, Fragment } from 'react';\nimport cloneDeep from 'lodash.clonedeep';\nimport Img from 'react-image';\nimport './SignEditor.css';\nimport ModalWrapper from '../Modals/ModalWrapper';\nimport { SignType, addOptionsToSelect } from '../../../SignworksJSON';\nimport { muttGenerator, layerURLs } from \"../../../utils/JSAPI\";\nimport Downshift from 'downshift';\nimport Timebands from '../Timebands/Timebands';\nimport Zone from './Zone';\nimport { MutcdDuplicate, isSpeedLimit, zoneVerify, timebandVerify } from './SignValidations';\n\nvar Typeahead = require('react-typeahead').Typeahead;\n\nvar myRef = React.createRef();\nvar amp = /[&]/;\n\nvar SignEditor =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignEditor, _Component);\n\n  function SignEditor(props) {\n    var _this;\n\n    _classCallCheck(this, SignEditor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignEditor).call(this, props));\n\n    _this.zoneChangeHandler = function (evt) {\n      var Checksky = true;\n\n      switch (evt.target.id) {\n        case \"ward1\":\n          _this.setState({\n            ward1: evt.target.value\n          }, function () {\n            Checksky = zoneVerify(this.state);\n            this.setState({\n              zoneChecked: Checksky\n            });\n          });\n\n          break;\n\n        case \"anc1\":\n          _this.setState({\n            anc1: evt.target.value\n          }, function () {\n            Checksky = zoneVerify(this.state);\n            this.setState({\n              zoneChecked: Checksky\n            });\n          });\n\n          break;\n\n        case \"ward2\":\n          _this.setState({\n            ward2: evt.target.value\n          }, function () {\n            Checksky = zoneVerify(this.state);\n            this.setState({\n              zoneChecked: Checksky\n            });\n          });\n\n          break;\n\n        case \"anc2\":\n          _this.setState({\n            anc2: evt.target.value\n          }, function () {\n            Checksky = zoneVerify(this.state);\n            this.setState({\n              zoneChecked: Checksky\n            });\n          });\n\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    _this.zoneAssembler = function () {\n      // this.state.ward1 + this.state.anc1 + \"&\" + this.state.ward2 + this.state.anc2\n      var zone = 'ndad';\n\n      if (_this.state.ward1) {\n        zone = _this.state.ward1.toString();\n      } else {\n        return \"\";\n      }\n\n      if (_this.state.anc1) {\n        zone += _this.state.anc1.toString();\n      }\n\n      if (_this.state.ward1 && _this.state.ward2) {\n        zone += \"&\" + _this.state.ward2.toString();\n      } else {\n        return zone;\n      }\n\n      if (_this.state.ward2 && _this.state.anc2) {\n        return zone + _this.state.anc2.toString();\n      } else {\n        return zone;\n      }\n    };\n\n    _this.saveClickHandler = function () {\n      var editedFeature = {};\n      editedFeature.sign = {};\n      editedFeature.sign.attributes = _objectSpread({}, _this.state.attributes);\n      /*  if (editedFeature.sign.attributes.SIGNARROWDIRECTION === 0) {\r\n          editedFeature.sign.attributes.SIGNARROWDIRECTION = null;\r\n      }  */\n\n      editedFeature.sign.attributes.ZONE_ID = _this.zoneAssembler();\n      editedFeature.sign.attributes.SIGNCODE = _this.state.MUTCD.code;\n      editedFeature.editBands = [];\n      editedFeature.newBands = [];\n      editedFeature.deleteBands = [];\n      editedFeature.sign.attributes.SIGNWORKS_LAST_EDITED_BY = _this.props.auth.user.username;\n\n      for (var i = 0; i < _this.state.timebands.length; i++) {\n        switch (_this.state.timebands[i].action) {\n          case 1:\n            editedFeature.newBands.push(_this.state.timebands[i]);\n            break;\n\n          case 2:\n            editedFeature.editBands.push(_this.state.timebands[i]);\n            break;\n\n          case 3:\n            editedFeature.deleteBands.push(_this.state.timebands[i].attributes.OBJECTID);\n            break;\n\n          default:\n            break;\n        }\n      }\n\n      var layers = layerURLs(_this.props);\n\n      _this.props.saveSign(_this.props.map.support, editedFeature, layers);\n\n      _this.props.modalClicked(false, null);\n    };\n\n    _this.cancelClickHandler = function () {\n      //this cancels the editor window\n      _this.props.modalClicked(false, null);\n    };\n\n    _this.muttSelectorSaveHandler = function () {\n      //\n      var result = MutcdDuplicate(_this.state.MUTCD.code, _this.props.map.signs);\n\n      _this.setState({\n        paneSelection: 1,\n        muttDupe: result,\n        showInfo: false\n      });\n    };\n\n    _this.cancelSelectionHandler = function (evt) {\n      _this.setState({\n        showInfo: false\n      });\n    };\n\n    _this.getOptions = function () {\n      var bob = [];\n\n      for (var i = 0; i < _this.props.map.muttArray.length; i++) {\n        bob.push(_this.props.map.muttArray[i].code + \": \" + _this.props.map.muttArray[i].name);\n      }\n\n      return bob;\n    };\n\n    _this.zoneParse = function (zoneValue) {\n      // why don't we just set the controls directly?  Because they don't exist yet.\n      // we don't have to check for all possible garbage because the zoneValue has\n      // already passed ZoneVerify Don't run this without running and passing\n      // zoneVerify first!\n      var zoneArray = [];\n\n      if (zoneValue) {\n        // set first cell\n        zoneArray[0] = zoneValue[0];\n      } else {\n        //empty zone id\n        return \"\";\n      } // set second cell\n\n\n      if (!zoneValue[1]) {\n        //just one ward no anc\n        return zoneArray;\n      } else if (amp.test(zoneValue[1])) {\n        //second digit is amp so third must be ward\n        zoneArray[2] = zoneValue[2];\n\n        if (!zoneValue[3]) {\n          // ward + amp + ward and done\n          return zoneArray;\n        } else {\n          //ward + amp + ward + anc and done\n          zoneArray[3] = zoneValue[3];\n          return zoneArray;\n        }\n      } else {\n        //ward + anc + ...\n        zoneArray[1] = zoneValue[1];\n\n        if (amp.test(zoneValue[2])) {\n          zoneArray[2] = zoneValue[3];\n\n          if (!zoneValue[4]) {\n            // ward + anc + amp + ward and done\n            return zoneArray;\n          } else {\n            // ward + anc + amp + ward + anc\n            zoneArray[3] = zoneValue[4];\n            return zoneArray;\n          }\n        } else {\n          // ward + anc and done\n          return zoneArray;\n        }\n      }\n    };\n\n    _this.signDirectionClickHandler = function (evt) {\n      _this.setState({\n        paneSelection: 3\n      });\n\n      evt.stopPropagation();\n    };\n\n    _this.signArrowSelectHandler = function (evt) {\n      var id = Number(evt.target.id.charAt(4));\n\n      _this.setState({\n        attributes: _objectSpread({}, _this.state.attributes, {\n          'SIGNARROWDIRECTION': id\n        }),\n        paneSelection: 1\n      });\n    };\n\n    _this.renderMuttInput = function () {\n      return React.createElement(\"span\", {\n        className: _this.state.muttDupe ? \"InnerMUTCD_error\" : \"InnerMUTCD\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"EditorMuttCode\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, _this.state.MUTCD.name.toUpperCase(), \":\"), React.createElement(\"div\", {\n        className: \"EditorMuteDesc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, _this.state.MUTCD.name));\n    };\n\n    _this.mutcdLookUpSelectHandler = function (desc) {\n      var option = desc.name.split(':');\n\n      var chosenOne = _this.props.map.muttArray.find(function (element) {\n        return element.code.toLowerCase() === option[0].toLowerCase();\n      });\n\n      var mutt = muttGenerator(chosenOne).next();\n      var newSpeedo = isSpeedLimit(chosenOne.code);\n\n      _this.setState({\n        MUTCD: mutt.value.payload.args[0][0],\n        muttInput: false,\n        showInfo: true,\n        speedo: newSpeedo,\n        attributes: _objectSpread({}, _this.state.attributes, {\n          'SIGNNUMBER': newSpeedo.speedLimit\n        })\n      });\n    };\n\n    _this.muttSelectorOpenHandler = function (evt) {\n      _this.setState({\n        muttInput: true\n      });\n    };\n\n    _this.cancelLookupHandler = function (evt) {\n      _this.setState({\n        muttInput: false\n      });\n\n      evt.stopPropagation();\n    };\n\n    _this.renderMuttDownshift = function () {\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        onClick: _this.cancelLookupHandler,\n        className: \"DownshiftLabel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }, \"X\"), React.createElement(Downshift, {\n        onChange: function onChange(sel) {\n          return _this.mutcdLookUpSelectHandler(sel);\n        },\n        itemToString: function itemToString(item) {\n          return item ? item.name : '';\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      }, function (_ref) {\n        var getInputProps = _ref.getInputProps,\n            getItemProps = _ref.getItemProps,\n            getLabelProps = _ref.getLabelProps,\n            getMenuProps = _ref.getMenuProps,\n            isOpen = _ref.isOpen,\n            inputValue = _ref.inputValue,\n            highlightedIndex = _ref.highlightedIndex,\n            selectedItem = _ref.selectedItem;\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 390\n          },\n          __self: this\n        }, React.createElement(\"input\", Object.assign({}, getInputProps(_this.inputProps), {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 392\n          },\n          __self: this\n        })), React.createElement(\"ul\", Object.assign({}, getMenuProps(_this.menuProps), {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 393\n          },\n          __self: this\n        }), isOpen ? _this.items.filter(function (item) {\n          return !inputValue || item.name.includes(inputValue.toUpperCase());\n        }).map(function (item, index) {\n          return React.createElement(\"li\", Object.assign({}, getItemProps({\n            key: item.id,\n            index: index,\n            item: item,\n            style: {\n              backgroundColor: highlightedIndex === index ? 'lightgray' : 'white',\n              fontWeight: selectedItem === item ? 'bold' : 'normal'\n            }\n          }), {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 400\n            },\n            __self: this\n          }), item.name);\n        }) : null));\n      }));\n    };\n\n    _this.readMUTCDinfo = function () {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: _this.state.MUTCD.serverImagePath,\n        className: \"SignEditorImage\",\n        alt: \"sign\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421\n        },\n        __self: this\n      }, _this.state.MUTCD.code, \": \", _this.state.MUTCD.name), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423\n        },\n        __self: this\n      }, \"Tags:\", _this.state.MUTCD.tags), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425\n        },\n        __self: this\n      }, _this.state.MUTCD.isParking ? React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427\n        },\n        __self: this\n      }, \"Parking Sign\") : \"\", _this.state.MUTCD.isSpeedLimit ? React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }, \"Speed Limit Sign\") : \"\", _this.state.MUTCD.isNonstandard ? React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433\n        },\n        __self: this\n      }, \"Non-Standard Sign\") : \"\", _this.state.MUTCD.needsArrow ? React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }, \"Requires Direction Arrow\") : \"\", _this.state.MUTCD.needsTimeband ? React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439\n        },\n        __self: this\n      }, \"Requires Time Restriction\") : \"\"));\n    };\n\n    _this.MPHSelectHandler = function (evt) {\n      ;\n\n      _this.setState({\n        attributes: _objectSpread({}, _this.state.attributes, {\n          'SIGNNUMBER': Number(evt.target.value)\n        })\n      });\n    };\n\n    _this.statusChangeHandler = function (evt) {\n      _this.setState({\n        attributes: _objectSpread({}, _this.state.attributes, {\n          \"SIGNSTATUS\": Number(evt.target.value)\n        })\n      });\n    };\n\n    _this.signTextChangeHandler = function (evt) {\n      _this.setState({\n        attributes: _objectSpread({}, _this.state.attributes, {\n          \"SIGNTEXT\": evt.target.value\n        })\n      });\n    };\n\n    _this.timebandChangeHandler = function (evt, index, ctrl) {\n      var bands = _this.state.timebands;\n\n      switch (ctrl) {\n        case 0:\n          bands[index].attributes.STARTDAY = Number(evt.target.value);\n          bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = _this.props.auth.user.username;\n          break;\n\n        case 1:\n          bands[index].attributes.ENDDAY = Number(evt.target.value);\n          bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = _this.props.auth.user.username;\n          break;\n\n        case 2:\n          bands[index].attributes.STARTTIME = Number(evt.target.value);\n          bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = _this.props.auth.user.username;\n          break;\n\n        case 3:\n          bands[index].attributes.ENDTIME = Number(evt.target.value);\n          bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = _this.props.auth.user.username;\n          break;\n\n        case 4:\n          bands[index].attributes.HOURLIMIT = Number(evt.target.value);\n          bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = _this.props.auth.user.username;\n          break;\n\n        case 5:\n          bands[index].attributes.STARTDAY = Number(evt.target.value);\n          bands[index].attributes.ENDDAY = 0;\n          bands[index].attributes.STARTTIME = 0;\n          bands[index].attributes.ENDTIME = 0;\n          bands[index].attributes.HOURLIMIT = 0;\n          bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = _this.props.auth.user.username;\n          break;\n\n        case 6:\n          bands[index].attributes.STARTDAY = Number(evt.target.value);\n          bands[index].attributes.ENDDAY = 0;\n          bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = _this.props.auth.user.username;\n          break;\n\n        default:\n          break;\n      }\n\n      timebandVerify(bands[index]); // set action to edit if existing record, unedited or already scheduled for\n      // editing records marked for add or delete will retain their current action\n\n      if (bands[index].action === 0 || bands[index].action === 2) {\n        bands[index].action = 2;\n      }\n\n      _this.setState({\n        timebands: _toConsumableArray(bands)\n      });\n    };\n\n    _this.timebandErrorMessageHandler = function (msg) {\n      _this.setState({\n        errorMessage: msg\n      });\n\n      if (msg == \"\") {\n        _this.setState({\n          cantSave: false\n        });\n      } else {\n        _this.setState({\n          cantSave: true\n        });\n      }\n\n      _this.timebandCollisionHandler();\n    };\n\n    _this.timebandAddHandler = function (signId) {\n      var bands = _toConsumableArray(_this.state.timebands);\n\n      var newBand = {\n        attributes: {\n          CREATED_DATE: null,\n          CREATED_USER: null,\n          ENDDAY: 0,\n          ENDTIME: 0,\n          EXCEPTION: null,\n          GLOBALID: null,\n          HOURLIMIT: 0,\n          LAST_EDITED_DATE: null,\n          LAST_EDITED_USER: null,\n          LINKID: null,\n          OBJECTID: null,\n          ORIGIN_ID: null,\n          RESTRICTIONORDER: null,\n          RESTRICTIONSTATUS: null,\n          SIGNID: signId,\n          SPACEARROW: null,\n          SPACEID: null,\n          STARTDAY: 8,\n          STARTTIME: 0,\n          SIGNWORKS_CREATED_BY: _this.props.auth.user.username,\n          SIGNWORKS_LAST_EDITED_BY: _this.props.auth.user.username\n        },\n        action: 1\n      };\n      bands.push(newBand);\n\n      _this.setState({\n        timebands: _toConsumableArray(bands)\n      });\n    };\n\n    _this.timebandDeleteHandler = function (evt, index, del) {\n      var bands = _toConsumableArray(_this.state.timebands); // if it is an existing record , edited or not, mark for deletion\n\n\n      if (bands[index].action === 0 || bands[index].action === 2) {\n        bands[index].action = 3; // if it is a new record, set to zero and it will disappear on save\n      } else {\n        bands[index].action = 0;\n      }\n\n      _this.setState({\n        timebands: _toConsumableArray(bands)\n      });\n    };\n\n    _this.timebandComparer = function (band1, band2) {\n      if (band1.attributes.STARTDAY === 8 || band2.attributes.STARTDAY === 8) {\n        _this.setState({\n          collisionMessage: \"Can't have another time restriction with ANYTIME\"\n        });\n\n        return true;\n      } else if (band1.attributes.STARTDAY < band2.attributes.STARTDAY && band1.attributes.ENDDAY > band2.attributes.STARTDAY) {\n        _this.setState({\n          collisionMessage: \"Time 2 starts during Time 1\"\n        });\n\n        return true;\n      } else {\n        _this.setState({\n          collisionMessage: \"\"\n        });\n      }\n\n      return false;\n    };\n\n    _this.timebandCollisionHandler = function () {\n      if (_this.state.timebands.length === 1) {\n        if (_this.state.timebands[0].attributes.STARTDAY === 8) {\n          _this.setState({\n            cantAdd: true\n          });\n        } else {\n          _this.setState({\n            cantAdd: false\n          });\n        }\n\n        return;\n      }\n\n      if (_this.state.timebands.length > 1) {\n        for (var i = 0; i < _this.state.timebands.length; i++) {\n          for (var j = 0; j < _this.state.timebands.length; j++) {\n            if (i === j) {\n              continue;\n            }\n\n            if (_this.timebandComparer(_this.state.timebands[i], _this.state.timebands[j])) {\n              var bandz = _toConsumableArray(_this.state.timebands);\n\n              bandz[i].conflict = true;\n              bandz[j].conflict = true;\n\n              _this.setState({\n                timebands: bandz,\n                cantSave: true\n              });\n\n              return;\n            } else {\n              var _bandz = _toConsumableArray(_this.state.timebands);\n\n              _bandz[i].conflict = false;\n              _bandz[j].conflict = false;\n\n              _this.setState({\n                timebands: _bandz,\n                cantSave: false\n              });\n            }\n          }\n        }\n      }\n    };\n\n    _this.signTypes = new SignType();\n    _this.items = [];\n    _this.inputProps = {\n      size: 30,\n      autoFocus: true\n    };\n    _this.menuProps = {\n      style: {\n        listStyle: 'none'\n      }\n    };\n\n    _this.formattedMuttArray = function () {\n      var mutt = [];\n\n      for (var i = 0; i < _this.props.map.muttArray.length; i++) {\n        var leMutt = {};\n        leMutt.name = _this.props.map.muttArray[i].code.toUpperCase() + \":\" + _this.props.map.muttArray[i].name.toUpperCase();\n        leMutt.id = _this.props.map.muttArray[i].id;\n        mutt.push(leMutt);\n      }\n\n      return mutt;\n    };\n\n    var _zone = _this.zoneParse(_this.props.map.signs[_this.props.map.editSignIndex].feature.attributes.ZONE_ID);\n\n    var sign = cloneDeep(_this.props.map.signs[_this.props.map.editSignIndex]);\n    var feature = cloneDeep(_this.props.map.signs[_this.props.map.editSignIndex].feature);\n    _this.state = _objectSpread({}, sign, feature, {\n      paneSelection: 1,\n      muttSelected: false,\n      showInfo: false,\n      muttInput: false,\n      ward1: _zone[0],\n      anc1: _zone[1],\n      ward2: _zone[2],\n      anc2: _zone[3],\n      //validation keys\n      muttDupe: false,\n      zoneChecked: true,\n      speedo: isSpeedLimit(_this.props.map.signs[_this.props.map.editSignIndex].feature.attributes.SIGNCODE),\n      errorMessage: \"no error yet\",\n      collisionMessage: \"no collisions yet\",\n      cantSave: false,\n      cantAdd: false // the action property is just being arbitrarily tacked on here, I will use it\n      // to sort the timebands for edits, adds, deletes, and no action\n\n    });\n\n    for (var i = 0; i < _this.state.timebands.length; i++) {\n      _this.state.timebands[i].action = 0;\n      _this.state.timebands[i].conflict = false;\n    }\n\n    _this.items = _this.formattedMuttArray();\n    return _this;\n  }\n\n  _createClass(SignEditor, [{\n    key: \"render\",\n    value: function render() {\n      var imgServerDown = window.location.origin + window.location.pathname + \"/img/PR-OTHER.png\";\n      return React.createElement(ModalWrapper, Object.assign({}, this.props, {\n        title: \"Edit Sign\",\n        width: 400,\n        showOk: this.props.map.showOk,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 697\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: this.state.paneSelection === 1 ? \"SignEditorOver\" : \"SignEditorUnder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 704\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"SignEditCancel\",\n        title: \"Close Window\",\n        onClick: this.cancelClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 708\n        },\n        __self: this\n      }, \"X\"), React.createElement(\"div\", {\n        className: \"MUTCDdiv\",\n        onClick: this.muttSelectorOpenHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 712\n        },\n        __self: this\n      }, React.createElement(Img, {\n        src: [this.state.MUTCD.serverImagePath, imgServerDown],\n        className: \"SignEditorImage\",\n        alt: \"sign\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 713\n        },\n        __self: this\n      }), this.state.muttInput ? this.renderMuttDownshift() : this.renderMuttInput(), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 720\n        },\n        __self: this\n      }, React.createElement(Img, {\n        alt: \"sign direction\",\n        src: [this.state.attributes.SIGNARROWDIRECTION ? window.location.origin + window.location.pathname + \"/img/\" + this.state.attributes.SIGNARROWDIRECTION + \".png\" : window.location.origin + window.location.pathname + \"/img/0.png\"],\n        onClick: this.signDirectionClickHandler,\n        className: \"SignDirectionArrow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 721\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 731\n        },\n        __self: this\n      }, React.createElement(\"hr\", {\n        className: \"EditorHorizontalBar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 732\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"SignAttributes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 735\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 736\n        },\n        __self: this\n      }, \"MPH:\", React.createElement(\"select\", {\n        value: this.state.speedo.speedLimit != null ? this.state.speedo.speedLimit != 0 ? this.state.speedo.speedLimit : this.state.attributes.SIGNNUMBER : \"\",\n        disabled: this.state.speedo.disabled,\n        onChange: this.MPHSelectHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 737\n        },\n        __self: this\n      }, addOptionsToSelect(this.signTypes._codedValuesSpeedLimit))), React.createElement(\"span\", {\n        className: this.state.zoneChecked ? \"ZoneSpan\" : \"ZoneSpan_error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 747\n        },\n        __self: this\n      }, React.createElement(Zone, {\n        props: _objectSpread({}, this.state),\n        change: this.zoneChangeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 751\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"StatusDiv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 757\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 758\n        },\n        __self: this\n      }, \"Status:\", React.createElement(\"select\", {\n        className: \"StatusSelect\",\n        value: this.state.attributes.SIGNSTATUS,\n        onChange: this.statusChangeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 760\n        },\n        __self: this\n      }, addOptionsToSelect(this.signTypes._codedValuesSignStatus))), React.createElement(\"span\", {\n        className: \"SignTextSpan\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 767\n        },\n        __self: this\n      }, \"Sign Text:\", React.createElement(\"textarea\", {\n        value: this.state.attributes.SIGNTEXT === null ? \"\" : this.state.attributes.SIGNTEXT,\n        onChange: this.signTextChangeHandler,\n        rows: \"4\",\n        className: \"SignText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 769\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"TimebandDiv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 779\n        },\n        __self: this\n      }, React.createElement(Timebands, {\n        bands: this.state.timebands,\n        edit: true,\n        change: this.timebandChangeHandler,\n        add: this.timebandAddHandler,\n        delete: this.timebandDeleteHandler,\n        error: this.timebandErrorMessageHandler,\n        cantAdd: this.state.cantAdd,\n        signId: this.state.feature.attributes.GLOBALID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 780\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"SignEditButtonDiv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 790\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.saveClickHandler,\n        disabled: this.state.cantSave,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 791\n        },\n        __self: this\n      }, \"SAVE\"), React.createElement(\"button\", {\n        onClick: this.cancelClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 792\n        },\n        __self: this\n      }, \"CANCEL\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 795\n        },\n        __self: this\n      }, this.state.errorMessage), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 796\n        },\n        __self: this\n      }, \" \", this.state.collisionMessage))), React.createElement(\"div\", {\n        className: this.state.paneSelection === 3 ? \"SignEditorOver\" : \"SignEditorUnder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 801\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"SignEditCancel\",\n        title: \"Close Window\",\n        onClick: this.cancelClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 805\n        },\n        __self: this\n      }, \"X\"), \"SIGN ARROW DIRECTION SELECTOR TOOL\", React.createElement(\"table\", {\n        className: \"dirSignTable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 809\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 810\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 811\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 812\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: \"6\",\n        src: \"img/6.png\",\n        className: \"dirSign\",\n        onClick: this.signArrowSelectHandler,\n        id: \"dir_6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 812\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 818\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: \"4\",\n        src: \"img/4.png\",\n        className: \"dirSign\",\n        onClick: this.signArrowSelectHandler,\n        id: \"dir_4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 818\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 824\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: \"8\",\n        src: \"img/8.png\",\n        className: \"dirSign\",\n        onClick: this.signArrowSelectHandler,\n        id: \"dir_8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 824\n        },\n        __self: this\n      }))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 832\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 833\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: \"1\",\n        src: \"img/1.png\",\n        className: \"dirSign\",\n        onClick: this.signArrowSelectHandler,\n        id: \"dir_1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 833\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 839\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: \"3\",\n        src: \"img/3.png\",\n        className: \"dirSign\",\n        onClick: this.signArrowSelectHandler,\n        id: \"dir_3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 839\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 845\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: \"2\",\n        src: \"img/2.png\",\n        className: \"dirSign\",\n        onClick: this.signArrowSelectHandler,\n        id: \"dir_2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 845\n        },\n        __self: this\n      }))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 853\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 854\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: \"7\",\n        src: \"img/7.png\",\n        className: \"dirSign\",\n        onClick: this.signArrowSelectHandler,\n        id: \"dir_7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 854\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 860\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: \"5\",\n        src: \"img/5.png\",\n        className: \"dirSign\",\n        onClick: this.signArrowSelectHandler,\n        id: \"dir_5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 860\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 866\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: \"9\",\n        src: \"img/9.png\",\n        className: \"dirSign\",\n        onClick: this.signArrowSelectHandler,\n        id: \"dir_9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 866\n        },\n        __self: this\n      }))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 874\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 875\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: \"0\",\n        src: \"img/0.png\",\n        className: \"dirSign\",\n        onClick: this.signArrowSelectHandler,\n        id: \"dir_0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 875\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 881\n        },\n        __self: this\n      }, \"(no direction)\")))), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 886\n        },\n        __self: this\n      }, \"Click A Selection to Return To The Editor\")));\n    }\n  }]);\n\n  return SignEditor;\n}(Component);\n\nexport { SignEditor as default };","map":{"version":3,"sources":["C:\\Projects\\Signworks3\\src\\components\\myModules\\Signs\\SignEditor.js"],"names":["React","Component","Fragment","cloneDeep","Img","ModalWrapper","SignType","addOptionsToSelect","muttGenerator","layerURLs","Downshift","Timebands","Zone","MutcdDuplicate","isSpeedLimit","zoneVerify","timebandVerify","Typeahead","require","myRef","createRef","amp","SignEditor","props","zoneChangeHandler","evt","Checksky","target","id","setState","ward1","value","state","zoneChecked","anc1","ward2","anc2","zoneAssembler","zone","toString","saveClickHandler","editedFeature","sign","attributes","ZONE_ID","SIGNCODE","MUTCD","code","editBands","newBands","deleteBands","SIGNWORKS_LAST_EDITED_BY","auth","user","username","i","timebands","length","action","push","OBJECTID","layers","saveSign","map","support","modalClicked","cancelClickHandler","muttSelectorSaveHandler","result","signs","paneSelection","muttDupe","showInfo","cancelSelectionHandler","getOptions","bob","muttArray","name","zoneParse","zoneValue","zoneArray","test","signDirectionClickHandler","stopPropagation","signArrowSelectHandler","Number","charAt","renderMuttInput","toUpperCase","mutcdLookUpSelectHandler","desc","option","split","chosenOne","find","element","toLowerCase","mutt","next","newSpeedo","payload","args","muttInput","speedo","speedLimit","muttSelectorOpenHandler","cancelLookupHandler","renderMuttDownshift","sel","item","getInputProps","getItemProps","getLabelProps","getMenuProps","isOpen","inputValue","highlightedIndex","selectedItem","inputProps","menuProps","items","filter","includes","index","key","style","backgroundColor","fontWeight","readMUTCDinfo","serverImagePath","tags","isParking","isNonstandard","needsArrow","needsTimeband","MPHSelectHandler","statusChangeHandler","signTextChangeHandler","timebandChangeHandler","ctrl","bands","STARTDAY","ENDDAY","STARTTIME","ENDTIME","HOURLIMIT","timebandErrorMessageHandler","msg","errorMessage","cantSave","timebandCollisionHandler","timebandAddHandler","signId","newBand","CREATED_DATE","CREATED_USER","EXCEPTION","GLOBALID","LAST_EDITED_DATE","LAST_EDITED_USER","LINKID","ORIGIN_ID","RESTRICTIONORDER","RESTRICTIONSTATUS","SIGNID","SPACEARROW","SPACEID","SIGNWORKS_CREATED_BY","timebandDeleteHandler","del","timebandComparer","band1","band2","collisionMessage","cantAdd","j","bandz","conflict","signTypes","size","autoFocus","listStyle","formattedMuttArray","leMutt","editSignIndex","feature","muttSelected","imgServerDown","window","location","origin","pathname","showOk","SIGNARROWDIRECTION","SIGNNUMBER","disabled","_codedValuesSpeedLimit","SIGNSTATUS","_codedValuesSignStatus","SIGNTEXT"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AAEA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAO,kBAAP;AAEA,OAAOC,YAAP,MAAyB,wBAAzB;AACA,SAAQC,QAAR,EAAkBC,kBAAlB,QAA2C,wBAA3C;AAEA,SAAQC,aAAR,EAAuBC,SAAvB,QAAuC,sBAAvC;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAAQC,cAAR,EAAwBC,YAAxB,EAAsCC,UAAtC,EAAkDC,cAAlD,QAAuE,mBAAvE;;AAEA,IAAIC,SAAS,GAAGC,OAAO,CAAC,iBAAD,CAAP,CAA2BD,SAA3C;;AAEA,IAAME,KAAK,GAAGnB,KAAK,CAACoB,SAAN,EAAd;AACA,IAAMC,GAAG,GAAG,KAAZ;;IAEqBC,U;;;;;AAEjB,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AAEf,oFAAMA,KAAN;;AAFe,UAwCnBC,iBAxCmB,GAwCC,UAACC,GAAD,EAAS;AACzB,UAAIC,QAAQ,GAAG,IAAf;;AACA,cAAQD,GAAG,CAACE,MAAJ,CAAWC,EAAnB;AACI,aAAK,OAAL;AACI,gBAAKC,QAAL,CAAc;AACVC,YAAAA,KAAK,EAAEL,GAAG,CAACE,MAAJ,CAAWI;AADR,WAAd,EAEG,YAAY;AACXL,YAAAA,QAAQ,GAAGX,UAAU,CAAC,KAAKiB,KAAN,CAArB;AACA,iBAAKH,QAAL,CAAc;AAACI,cAAAA,WAAW,EAAEP;AAAd,aAAd;AAEH,WAND;;AAOA;;AACJ,aAAK,MAAL;AACI,gBAAKG,QAAL,CAAc;AACVK,YAAAA,IAAI,EAAET,GAAG,CAACE,MAAJ,CAAWI;AADP,WAAd,EAEG,YAAY;AACXL,YAAAA,QAAQ,GAAGX,UAAU,CAAC,KAAKiB,KAAN,CAArB;AACA,iBAAKH,QAAL,CAAc;AAACI,cAAAA,WAAW,EAAEP;AAAd,aAAd;AAEH,WAND;;AAOA;;AACJ,aAAK,OAAL;AACI,gBAAKG,QAAL,CAAc;AACVM,YAAAA,KAAK,EAAEV,GAAG,CAACE,MAAJ,CAAWI;AADR,WAAd,EAEG,YAAY;AACXL,YAAAA,QAAQ,GAAGX,UAAU,CAAC,KAAKiB,KAAN,CAArB;AACA,iBAAKH,QAAL,CAAc;AAACI,cAAAA,WAAW,EAAEP;AAAd,aAAd;AAEH,WAND;;AAOA;;AACJ,aAAK,MAAL;AACI,gBAAKG,QAAL,CAAc;AACVO,YAAAA,IAAI,EAAEX,GAAG,CAACE,MAAJ,CAAWI;AADP,WAAd,EAEG,YAAY;AACXL,YAAAA,QAAQ,GAAGX,UAAU,CAAC,KAAKiB,KAAN,CAArB;AACA,iBAAKH,QAAL,CAAc;AAACI,cAAAA,WAAW,EAAEP;AAAd,aAAd;AAEH,WAND;;AAOA;;AACJ;AACI;AAtCR;AAyCH,KAnFkB;;AAAA,UAqFnBW,aArFmB,GAqFH,YAAM;AAElB;AACA,UAAIC,IAAI,GAAG,MAAX;;AACA,UAAI,MAAKN,KAAL,CAAWF,KAAf,EAAsB;AAElBQ,QAAAA,IAAI,GAAG,MACFN,KADE,CAEFF,KAFE,CAGFS,QAHE,EAAP;AAKH,OAPD,MAOO;AACH,eAAO,EAAP;AACH;;AAED,UAAI,MAAKP,KAAL,CAAWE,IAAf,EAAqB;AAEjBI,QAAAA,IAAI,IAAI,MACHN,KADG,CAEHE,IAFG,CAGHK,QAHG,EAAR;AAKH;;AACD,UAAI,MAAKP,KAAL,CAAWF,KAAX,IAAoB,MAAKE,KAAL,CAAWG,KAAnC,EAA0C;AAEtCG,QAAAA,IAAI,IAAI,MAAM,MACTN,KADS,CAETG,KAFS,CAGTI,QAHS,EAAd;AAKH,OAPD,MAOO;AACH,eAAOD,IAAP;AACH;;AACD,UAAI,MAAKN,KAAL,CAAWG,KAAX,IAAoB,MAAKH,KAAL,CAAWI,IAAnC,EAAyC;AAErC,eAAOE,IAAI,GAAG,MACTN,KADS,CAETI,IAFS,CAGTG,QAHS,EAAd;AAIH,OAND,MAMO;AACH,eAAOD,IAAP;AACH;AACJ,KA/HkB;;AAAA,UAiInBE,gBAjImB,GAiIA,YAAM;AAErB,UAAMC,aAAa,GAAG,EAAtB;AAEAA,MAAAA,aAAa,CAACC,IAAd,GAAqB,EAArB;AACAD,MAAAA,aAAa,CAACC,IAAd,CAAmBC,UAAnB,qBACO,MAAKX,KAAL,CAAWW,UADlB;AAGA;;;;AAIAF,MAAAA,aAAa,CAACC,IAAd,CAAmBC,UAAnB,CAA8BC,OAA9B,GAAwC,MAAKP,aAAL,EAAxC;AAEAI,MAAAA,aAAa,CAACC,IAAd,CAAmBC,UAAnB,CAA8BE,QAA9B,GAAyC,MAAKb,KAAL,CAAWc,KAAX,CAAiBC,IAA1D;AACAN,MAAAA,aAAa,CAACO,SAAd,GAA0B,EAA1B;AACAP,MAAAA,aAAa,CAACQ,QAAd,GAAyB,EAAzB;AACAR,MAAAA,aAAa,CAACS,WAAd,GAA4B,EAA5B;AAEAT,MAAAA,aAAa,CAACC,IAAd,CAAmBC,UAAnB,CAA8BQ,wBAA9B,GAAyD,MAAK5B,KAAL,CAAW6B,IAAX,CAAgBC,IAAhB,CAAqBC,QAA9E;;AAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,MAAKvB,KAAL,CAAWwB,SAAX,CAAqBC,MAAzC,EAAiDF,CAAC,EAAlD,EAAsD;AAElD,gBAAQ,MAAKvB,KAAL,CAAWwB,SAAX,CAAqBD,CAArB,EAAwBG,MAAhC;AACI,eAAK,CAAL;AACIjB,YAAAA,aAAa,CACRQ,QADL,CAEKU,IAFL,CAEU,MAAK3B,KAAL,CAAWwB,SAAX,CAAqBD,CAArB,CAFV;AAGA;;AACJ,eAAK,CAAL;AACId,YAAAA,aAAa,CACRO,SADL,CAEKW,IAFL,CAEU,MAAK3B,KAAL,CAAWwB,SAAX,CAAqBD,CAArB,CAFV;AAGA;;AACJ,eAAK,CAAL;AACId,YAAAA,aAAa,CACRS,WADL,CAEKS,IAFL,CAEU,MAAK3B,KAAL,CAAWwB,SAAX,CAAqBD,CAArB,EAAwBZ,UAAxB,CAAmCiB,QAF7C;AAGA;;AACJ;AACI;AAjBR;AAoBH;;AACD,UAAMC,MAAM,GAAGpD,SAAS,CAAC,MAAKc,KAAN,CAAxB;;AAEA,YACKA,KADL,CAEKuC,QAFL,CAEc,MAAKvC,KAAL,CAAWwC,GAAX,CAAeC,OAF7B,EAEsCvB,aAFtC,EAEqDoB,MAFrD;;AAGA,YACKtC,KADL,CAEK0C,YAFL,CAEkB,KAFlB,EAEyB,IAFzB;AAGH,KArLkB;;AAAA,UAuLnBC,kBAvLmB,GAuLE,YAAM;AACvB;AACA,YACK3C,KADL,CAEK0C,YAFL,CAEkB,KAFlB,EAEyB,IAFzB;AAGH,KA5LkB;;AAAA,UA8LnBE,uBA9LmB,GA8LO,YAAM;AAC5B;AACA,UAAMC,MAAM,GAAGvD,cAAc,CAAC,MAAKmB,KAAL,CAAWc,KAAX,CAAiBC,IAAlB,EAAwB,MAAKxB,KAAL,CAAWwC,GAAX,CAAeM,KAAvC,CAA7B;;AAEA,YAAKxC,QAAL,CAAc;AAACyC,QAAAA,aAAa,EAAE,CAAhB;AAAmBC,QAAAA,QAAQ,EAAEH,MAA7B;AAAqCI,QAAAA,QAAQ,EAAE;AAA/C,OAAd;AACH,KAnMkB;;AAAA,UAqMnBC,sBArMmB,GAqMM,UAAChD,GAAD,EAAS;AAC9B,YAAKI,QAAL,CAAc;AAAC2C,QAAAA,QAAQ,EAAE;AAAX,OAAd;AACH,KAvMkB;;AAAA,UAyMnBE,UAzMmB,GAyMN,YAAM;AACf,UAAIC,GAAG,GAAG,EAAV;;AACA,WAAK,IAAIpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,MAAKhC,KAAL,CAAWwC,GAAX,CAAea,SAAf,CAAyBnB,MAA7C,EAAqDF,CAAC,EAAtD,EAA0D;AACtDoB,QAAAA,GAAG,CAAChB,IAAJ,CAAS,MAAKpC,KAAL,CAAWwC,GAAX,CAAea,SAAf,CAAyBrB,CAAzB,EAA4BR,IAA5B,GAAmC,IAAnC,GAA0C,MAAKxB,KAAL,CAAWwC,GAAX,CAAea,SAAf,CAAyBrB,CAAzB,EAA4BsB,IAA/E;AACH;;AAED,aAAOF,GAAP;AAEH,KAjNkB;;AAAA,UAmNnBG,SAnNmB,GAmNP,UAACC,SAAD,EAAe;AACvB;AACA;AACA;AACA;AACA,UAAIC,SAAS,GAAG,EAAhB;;AACA,UAAID,SAAJ,EAAe;AACX;AACAC,QAAAA,SAAS,CAAC,CAAD,CAAT,GAAeD,SAAS,CAAC,CAAD,CAAxB;AACH,OAHD,MAGO;AACH;AACA,eAAO,EAAP;AACH,OAZsB,CAavB;;;AACA,UAAI,CAACA,SAAS,CAAC,CAAD,CAAd,EAAmB;AACf;AACA,eAAOC,SAAP;AACH,OAHD,MAGO,IAAI3D,GAAG,CAAC4D,IAAJ,CAASF,SAAS,CAAC,CAAD,CAAlB,CAAJ,EAA4B;AAC/B;AACAC,QAAAA,SAAS,CAAC,CAAD,CAAT,GAAeD,SAAS,CAAC,CAAD,CAAxB;;AACA,YAAI,CAACA,SAAS,CAAC,CAAD,CAAd,EAAmB;AACf;AACA,iBAAOC,SAAP;AACH,SAHD,MAGO;AACH;AACAA,UAAAA,SAAS,CAAC,CAAD,CAAT,GAAeD,SAAS,CAAC,CAAD,CAAxB;AACA,iBAAOC,SAAP;AACH;AACJ,OAXM,MAWA;AACH;AACAA,QAAAA,SAAS,CAAC,CAAD,CAAT,GAAeD,SAAS,CAAC,CAAD,CAAxB;;AACA,YAAI1D,GAAG,CAAC4D,IAAJ,CAASF,SAAS,CAAC,CAAD,CAAlB,CAAJ,EAA4B;AACxBC,UAAAA,SAAS,CAAC,CAAD,CAAT,GAAeD,SAAS,CAAC,CAAD,CAAxB;;AACA,cAAI,CAACA,SAAS,CAAC,CAAD,CAAd,EAAmB;AACf;AACA,mBAAOC,SAAP;AACH,WAHD,MAGO;AACH;AACAA,YAAAA,SAAS,CAAC,CAAD,CAAT,GAAeD,SAAS,CAAC,CAAD,CAAxB;AACA,mBAAOC,SAAP;AACH;AACJ,SAVD,MAUO;AACH;AACA,iBAAOA,SAAP;AACH;AACJ;AAEJ,KAlQkB;;AAAA,UAoQnBE,yBApQmB,GAoQS,UAACzD,GAAD,EAAS;AAEjC,YAAKI,QAAL,CAAc;AAACyC,QAAAA,aAAa,EAAE;AAAhB,OAAd;;AACA7C,MAAAA,GAAG,CAAC0D,eAAJ;AACH,KAxQkB;;AAAA,UA0QnBC,sBA1QmB,GA0QM,UAAC3D,GAAD,EAAS;AAC9B,UAAIG,EAAE,GAAGyD,MAAM,CAAC5D,GAAG,CAACE,MAAJ,CAAWC,EAAX,CAAc0D,MAAd,CAAqB,CAArB,CAAD,CAAf;;AAEA,YAAKzD,QAAL,CAAc;AACVc,QAAAA,UAAU,oBACH,MAAKX,KAAL,CAAWW,UADR;AAEN,gCAAsBf;AAFhB,UADA;AAKV0C,QAAAA,aAAa,EAAE;AALL,OAAd;AAQH,KArRkB;;AAAA,UAuRnBiB,eAvRmB,GAuRD,YAAM;AAEpB,aAAO;AACH,QAAA,SAAS,EAAE,MAAKvD,KAAL,CAAWuC,QAAX,GACT,kBADS,GAET,YAHC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIH;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,MACIvC,KADJ,CAEIc,KAFJ,CAGI+B,IAHJ,CAIIW,WAJJ,EADL,MAJG,EAWH;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,MAAKxD,KAAL,CAAWc,KAAX,CAAiB+B,IADtB,CAXG,CAAP;AAiBH,KA1SkB;;AAAA,UA4SnBY,wBA5SmB,GA4SQ,UAACC,IAAD,EAAU;AAEjC,UAAIC,MAAM,GAAGD,IAAI,CACZb,IADQ,CAERe,KAFQ,CAEF,GAFE,CAAb;;AAIA,UAAIC,SAAS,GAAG,MACXtE,KADW,CAEXwC,GAFW,CAGXa,SAHW,CAIXkB,IAJW,CAIN,UAAUC,OAAV,EAAmB;AACrB,eAAOA,OAAO,CACThD,IADE,CAEFiD,WAFE,OAEgBL,MAAM,CAAC,CAAD,CAAN,CAAUK,WAAV,EAFvB;AAGH,OARW,CAAhB;;AAUA,UAAMC,IAAI,GAAGzF,aAAa,CAACqF,SAAD,CAAb,CAAyBK,IAAzB,EAAb;AAEA,UAAMC,SAAS,GAAGrF,YAAY,CAAC+E,SAAS,CAAC9C,IAAX,CAA9B;;AAEA,YAAKlB,QAAL,CAAc;AACViB,QAAAA,KAAK,EAAEmD,IAAI,CAAClE,KAAL,CAAWqE,OAAX,CAAmBC,IAAnB,CAAwB,CAAxB,EAA2B,CAA3B,CADG;AAEVC,QAAAA,SAAS,EAAE,KAFD;AAGV9B,QAAAA,QAAQ,EAAE,IAHA;AAIV+B,QAAAA,MAAM,EAAEJ,SAJE;AAKVxD,QAAAA,UAAU,oBACH,MAAKX,KAAL,CAAWW,UADR;AAEN,wBAAcwD,SAAS,CAACK;AAFlB;AALA,OAAd;AAWH,KA3UkB;;AAAA,UA6UnBC,uBA7UmB,GA6UO,UAAChF,GAAD,EAAS;AAE/B,YAAKI,QAAL,CAAc;AAACyE,QAAAA,SAAS,EAAE;AAAZ,OAAd;AACH,KAhVkB;;AAAA,UAkVnBI,mBAlVmB,GAkVG,UAACjF,GAAD,EAAS;AAE3B,YAAKI,QAAL,CAAc;AAACyE,QAAAA,SAAS,EAAE;AAAZ,OAAd;;AACA7E,MAAAA,GAAG,CAAC0D,eAAJ;AAEH,KAvVkB;;AAAA,UAyVnBwB,mBAzVmB,GAyVG,YAAM;AAExB,aAAO,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACH;AAAO,QAAA,OAAO,EAAE,MAAKD,mBAArB;AAA0C,QAAA,SAAS,EAAC,gBAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADG,EAIH,oBAAC,SAAD;AACI,QAAA,QAAQ,EACP,kBAACE,GAAD;AAAA,iBAAS,MAAKnB,wBAAL,CAA8BmB,GAA9B,CAAT;AAAA,SAFL;AAGI,QAAA,YAAY,EAAE,sBAAAC,IAAI;AAAA,iBAAKA,IAAI,GACzBA,IAAI,CAAChC,IADoB,GAEzB,EAFgB;AAAA,SAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMK;AAAA,YACGiC,aADH,QACGA,aADH;AAAA,YAEGC,YAFH,QAEGA,YAFH;AAAA,YAGGC,aAHH,QAGGA,aAHH;AAAA,YAIGC,YAJH,QAIGA,YAJH;AAAA,YAKGC,MALH,QAKGA,MALH;AAAA,YAMGC,UANH,QAMGA,UANH;AAAA,YAOGC,gBAPH,QAOGA,gBAPH;AAAA,YAQGC,YARH,QAQGA,YARH;AAAA,eAUG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAEI,+CAAWP,aAAa,CAAC,MAAKQ,UAAN,CAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFJ,EAGI,4CAAQL,YAAY,CAAC,MAAKM,SAAN,CAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAEKL,MAAM,GACD,MACGM,KADH,CAEGC,MAFH,CAEU,UAAAZ,IAAI;AAAA,iBAAI,CAACM,UAAD,IAAeN,IAAI,CAAChC,IAAL,CAAU6C,QAAV,CAAmBP,UAAU,CAAC3B,WAAX,EAAnB,CAAnB;AAAA,SAFd,EAGGzB,GAHH,CAGO,UAAC8C,IAAD,EAAOc,KAAP;AAAA,iBACD,4CACQZ,YAAY,CAAC;AAAEa,YAAAA,GAAG,EAAEf,IAAI,CAACjF,EAAZ;AAAgB+F,YAAAA,KAAK,EAALA,KAAhB;AAAuBd,YAAAA,IAAI,EAAJA,IAAvB;AAA6BgB,YAAAA,KAAK,EAAE;AAAEC,cAAAA,eAAe,EAAEV,gBAAgB,KAAKO,KAArB,GAA6B,WAA7B,GAA2C,OAA9D;AAAuEI,cAAAA,UAAU,EAAEV,YAAY,KAAKR,IAAjB,GAAwB,MAAxB,GAAiC;AAApH;AAApC,WAAD,CADpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAEKA,IAAI,CAAChC,IAFV,CADC;AAAA,SAHP,CADC,GAUD,IAZV,CAHJ,CAVH;AAAA,OANL,CAJG,CAAP;AAyCH,KApYkB;;AAAA,UAsYnBmD,aAtYmB,GAsYH,YAAM;AAElB,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AACI,QAAA,GAAG,EAAE,MAAKhG,KAAL,CAAWc,KAAX,CAAiBmF,eAD1B;AAEI,QAAA,SAAS,EAAC,iBAFd;AAGI,QAAA,GAAG,EAAC,MAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAM,MAAKjG,KAAL,CAAWc,KAAX,CAAiBC,IAAvB,QACO,MAAKf,KAAL,CAAWc,KAAX,CAAiB+B,IADxB,CALJ,EAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAW,MAAK7C,KAAL,CAAWc,KAAX,CAAiBoF,IAA5B,CAPJ,EASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,MAAKlG,KAAL,CAAWc,KAAX,CAAiBqF,SAAjB,GACK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADL,GAEK,EAHV,EAIK,MAAKnG,KAAL,CAAWc,KAAX,CAAiBhC,YAAjB,GACK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADL,GAEK,EANV,EAOK,MAAKkB,KAAL,CAAWc,KAAX,CAAiBsF,aAAjB,GACK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADL,GAEK,EATV,EAUK,MAAKpG,KAAL,CAAWc,KAAX,CAAiBuF,UAAjB,GACK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCADL,GAEK,EAZV,EAaK,MAAKrG,KAAL,CAAWc,KAAX,CAAiBwF,aAAjB,GACK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCADL,GAEK,EAfV,CATJ,CADJ;AA+BH,KAvakB;;AAAA,UAyanBC,gBAzamB,GAyaA,UAAC9G,GAAD,EAAS;AAAC;;AACzB,YAAKI,QAAL,CAAc;AACVc,QAAAA,UAAU,oBACH,MAAKX,KAAL,CAAWW,UADR;AAEN,wBAAc0C,MAAM,CAAC5D,GAAG,CAACE,MAAJ,CAAWI,KAAZ;AAFd;AADA,OAAd;AAMH,KAhbkB;;AAAA,UAkbnByG,mBAlbmB,GAkbG,UAAC/G,GAAD,EAAS;AAE3B,YAAKI,QAAL,CAAc;AACVc,QAAAA,UAAU,oBACH,MAAKX,KAAL,CAAWW,UADR;AAEN,wBAAc0C,MAAM,CAAC5D,GAAG,CAACE,MAAJ,CAAWI,KAAZ;AAFd;AADA,OAAd;AAMH,KA1bkB;;AAAA,UA4bnB0G,qBA5bmB,GA4bK,UAAChH,GAAD,EAAS;AAE7B,YAAKI,QAAL,CAAc;AACVc,QAAAA,UAAU,oBACH,MAAKX,KAAL,CAAWW,UADR;AAEN,sBAAYlB,GAAG,CAACE,MAAJ,CAAWI;AAFjB;AADA,OAAd;AAMH,KApckB;;AAAA,UAwcnB2G,qBAxcmB,GAwcK,UAACjH,GAAD,EAAMkG,KAAN,EAAagB,IAAb,EAAsB;AAE1C,UAAIC,KAAK,GAAG,MAAK5G,KAAL,CAAWwB,SAAvB;;AAEA,cAAQmF,IAAR;AAEI,aAAK,CAAL;AAEIC,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBkG,QAAxB,GAAmCxD,MAAM,CAAC5D,GAAG,CAACE,MAAJ,CAAWI,KAAZ,CAAzC;AACA6G,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBQ,wBAAxB,GAAmD,MAAK5B,KAAL,CAAW6B,IAAX,CAAgBC,IAAhB,CAAqBC,QAAxE;AAEA;;AACJ,aAAK,CAAL;AACIsF,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBmG,MAAxB,GAAiCzD,MAAM,CAAC5D,GAAG,CAACE,MAAJ,CAAWI,KAAZ,CAAvC;AACA6G,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBQ,wBAAxB,GAAmD,MAAK5B,KAAL,CAAW6B,IAAX,CAAgBC,IAAhB,CAAqBC,QAAxE;AACA;;AACJ,aAAK,CAAL;AACIsF,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBoG,SAAxB,GAAoC1D,MAAM,CAAC5D,GAAG,CAACE,MAAJ,CAAWI,KAAZ,CAA1C;AACA6G,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBQ,wBAAxB,GAAmD,MAAK5B,KAAL,CAAW6B,IAAX,CAAgBC,IAAhB,CAAqBC,QAAxE;AACA;;AACJ,aAAK,CAAL;AACIsF,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBqG,OAAxB,GAAkC3D,MAAM,CAAC5D,GAAG,CAACE,MAAJ,CAAWI,KAAZ,CAAxC;AACA6G,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBQ,wBAAxB,GAAmD,MAAK5B,KAAL,CAAW6B,IAAX,CAAgBC,IAAhB,CAAqBC,QAAxE;AACA;;AACJ,aAAK,CAAL;AACIsF,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBsG,SAAxB,GAAoC5D,MAAM,CAAC5D,GAAG,CAACE,MAAJ,CAAWI,KAAZ,CAA1C;AACA6G,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBQ,wBAAxB,GAAmD,MAAK5B,KAAL,CAAW6B,IAAX,CAAgBC,IAAhB,CAAqBC,QAAxE;AACA;;AACJ,aAAK,CAAL;AAEIsF,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBkG,QAAxB,GAAmCxD,MAAM,CAAC5D,GAAG,CAACE,MAAJ,CAAWI,KAAZ,CAAzC;AACA6G,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBmG,MAAxB,GAAiC,CAAjC;AACAF,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBoG,SAAxB,GAAoC,CAApC;AACAH,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBqG,OAAxB,GAAkC,CAAlC;AACAJ,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBsG,SAAxB,GAAoC,CAApC;AACAL,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBQ,wBAAxB,GAAmD,MAAK5B,KAAL,CAAW6B,IAAX,CAAgBC,IAAhB,CAAqBC,QAAxE;AACA;;AACJ,aAAK,CAAL;AAEIsF,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBkG,QAAxB,GAAmCxD,MAAM,CAAC5D,GAAG,CAACE,MAAJ,CAAWI,KAAZ,CAAzC;AACA6G,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBmG,MAAxB,GAAiC,CAAjC;AACAF,UAAAA,KAAK,CAACjB,KAAD,CAAL,CAAahF,UAAb,CAAwBQ,wBAAxB,GAAmD,MAAK5B,KAAL,CAAW6B,IAAX,CAAgBC,IAAhB,CAAqBC,QAAxE;AACA;;AACJ;AACI;AAxCR;;AA2CAtC,MAAAA,cAAc,CAAC4H,KAAK,CAACjB,KAAD,CAAN,CAAd,CA/C0C,CAiD1C;AACA;;AACA,UAAIiB,KAAK,CAACjB,KAAD,CAAL,CAAajE,MAAb,KAAwB,CAAxB,IAA6BkF,KAAK,CAACjB,KAAD,CAAL,CAAajE,MAAb,KAAwB,CAAzD,EAA4D;AAExDkF,QAAAA,KAAK,CAACjB,KAAD,CAAL,CAAajE,MAAb,GAAsB,CAAtB;AACH;;AAED,YAAK7B,QAAL,CAAc;AACV2B,QAAAA,SAAS,qBAAMoF,KAAN;AADC,OAAd;AAGH,KAngBkB;;AAAA,UAqgBnBM,2BArgBmB,GAqgBW,UAACC,GAAD,EAAS;AAEnC,YAAKtH,QAAL,CAAc;AAACuH,QAAAA,YAAY,EAAED;AAAf,OAAd;;AACA,UAAIA,GAAG,IAAI,EAAX,EAAe;AACX,cAAKtH,QAAL,CAAc;AAACwH,UAAAA,QAAQ,EAAE;AAAX,SAAd;AACH,OAFD,MAEO;AACH,cAAKxH,QAAL,CAAc;AAACwH,UAAAA,QAAQ,EAAE;AAAX,SAAd;AACH;;AACD,YAAKC,wBAAL;AACH,KA9gBkB;;AAAA,UAghBnBC,kBAhhBmB,GAghBE,UAACC,MAAD,EAAY;AAE7B,UAAIZ,KAAK,sBAAO,MAAK5G,KAAL,CAAWwB,SAAlB,CAAT;;AACA,UAAMiG,OAAO,GAAG;AACZ9G,QAAAA,UAAU,EAAE;AACR+G,UAAAA,YAAY,EAAE,IADN;AAERC,UAAAA,YAAY,EAAE,IAFN;AAGRb,UAAAA,MAAM,EAAE,CAHA;AAIRE,UAAAA,OAAO,EAAE,CAJD;AAKRY,UAAAA,SAAS,EAAE,IALH;AAMRC,UAAAA,QAAQ,EAAE,IANF;AAORZ,UAAAA,SAAS,EAAE,CAPH;AAQRa,UAAAA,gBAAgB,EAAE,IARV;AASRC,UAAAA,gBAAgB,EAAE,IATV;AAURC,UAAAA,MAAM,EAAE,IAVA;AAWRpG,UAAAA,QAAQ,EAAE,IAXF;AAYRqG,UAAAA,SAAS,EAAE,IAZH;AAaRC,UAAAA,gBAAgB,EAAE,IAbV;AAcRC,UAAAA,iBAAiB,EAAE,IAdX;AAeRC,UAAAA,MAAM,EAAEZ,MAfA;AAgBRa,UAAAA,UAAU,EAAE,IAhBJ;AAiBRC,UAAAA,OAAO,EAAE,IAjBD;AAkBRzB,UAAAA,QAAQ,EAAE,CAlBF;AAmBRE,UAAAA,SAAS,EAAE,CAnBH;AAoBRwB,UAAAA,oBAAoB,EAAE,MAAKhJ,KAAL,CAAW6B,IAAX,CAAgBC,IAAhB,CAAqBC,QApBnC;AAqBRH,UAAAA,wBAAwB,EAAE,MAAK5B,KAAL,CAAW6B,IAAX,CAAgBC,IAAhB,CAAqBC;AArBvC,SADA;AAwBZI,QAAAA,MAAM,EAAE;AAxBI,OAAhB;AA2BAkF,MAAAA,KAAK,CAACjF,IAAN,CAAW8F,OAAX;;AACA,YAAK5H,QAAL,CAAc;AACV2B,QAAAA,SAAS,qBAAMoF,KAAN;AADC,OAAd;AAGH,KAljBkB;;AAAA,UAojBnB4B,qBApjBmB,GAojBK,UAAC/I,GAAD,EAAMkG,KAAN,EAAa8C,GAAb,EAAqB;AAEzC,UAAI7B,KAAK,sBAAO,MAAK5G,KAAL,CAAWwB,SAAlB,CAAT,CAFyC,CAGzC;;;AACA,UAAIoF,KAAK,CAACjB,KAAD,CAAL,CAAajE,MAAb,KAAwB,CAAxB,IAA6BkF,KAAK,CAACjB,KAAD,CAAL,CAAajE,MAAb,KAAwB,CAAzD,EAA4D;AACxDkF,QAAAA,KAAK,CAACjB,KAAD,CAAL,CAAajE,MAAb,GAAsB,CAAtB,CADwD,CAChC;AAE3B,OAHD,MAGO;AACHkF,QAAAA,KAAK,CAACjB,KAAD,CAAL,CAAajE,MAAb,GAAsB,CAAtB;AACH;;AAED,YAAK7B,QAAL,CAAc;AACV2B,QAAAA,SAAS,qBAAMoF,KAAN;AADC,OAAd;AAGH,KAlkBkB;;AAAA,UAokBnB8B,gBApkBmB,GAokBA,UAACC,KAAD,EAAQC,KAAR,EAAkB;AAEjC,UAAID,KAAK,CAAChI,UAAN,CAAiBkG,QAAjB,KAA8B,CAA9B,IAAmC+B,KAAK,CAACjI,UAAN,CAAiBkG,QAAjB,KAA6B,CAApE,EAAuE;AACnE,cAAKhH,QAAL,CAAc;AAACgJ,UAAAA,gBAAgB,EAAC;AAAlB,SAAd;;AACA,eAAO,IAAP;AACH,OAHD,MAIK,IAAGF,KAAK,CAAChI,UAAN,CAAiBkG,QAAjB,GAA4B+B,KAAK,CAACjI,UAAN,CAAiBkG,QAA7C,IAAyD8B,KAAK,CAAChI,UAAN,CAAiBmG,MAAjB,GAA0B8B,KAAK,CAACjI,UAAN,CAAiBkG,QAAvG,EAAgH;AACjH,cAAKhH,QAAL,CAAc;AAACgJ,UAAAA,gBAAgB,EAAC;AAAlB,SAAd;;AACA,eAAO,IAAP;AACH,OAHI,MAID;AACA,cAAKhJ,QAAL,CAAc;AAACgJ,UAAAA,gBAAgB,EAAE;AAAnB,SAAd;AACH;;AACD,aAAO,KAAP;AACH,KAllBkB;;AAAA,UAolBnBvB,wBAplBmB,GAolBQ,YAAM;AAE7B,UAAI,MAAKtH,KAAL,CAAWwB,SAAX,CAAqBC,MAArB,KAAgC,CAApC,EAAuC;AACnC,YAAI,MAAKzB,KAAL,CAAWwB,SAAX,CAAqB,CAArB,EAAwBb,UAAxB,CAAmCkG,QAAnC,KAAgD,CAApD,EAAuD;AACnD,gBAAKhH,QAAL,CAAc;AAACiJ,YAAAA,OAAO,EAAE;AAAV,WAAd;AACH,SAFD,MAEO;AACH,gBAAKjJ,QAAL,CAAc;AAACiJ,YAAAA,OAAO,EAAE;AAAV,WAAd;AACH;;AACD;AACH;;AACD,UAAI,MAAK9I,KAAL,CAAWwB,SAAX,CAAqBC,MAArB,GAA8B,CAAlC,EAAqC;AACjC,aAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,MAAKvB,KAAL,CAAWwB,SAAX,CAAqBC,MAAzC,EAAiDF,CAAC,EAAlD,EAAsD;AAClD,eAAK,IAAIwH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,MAAK/I,KAAL,CAAWwB,SAAX,CAAqBC,MAAzC,EAAiDsH,CAAC,EAAlD,EAAsD;AAClD,gBAAGxH,CAAC,KAAKwH,CAAT,EAAW;AACP;AACH;;AACD,gBAAI,MAAKL,gBAAL,CAAsB,MAAK1I,KAAL,CAAWwB,SAAX,CAAqBD,CAArB,CAAtB,EAA+C,MAAKvB,KAAL,CAAWwB,SAAX,CAAqBuH,CAArB,CAA/C,CAAJ,EAA6E;AACzE,kBAAIC,KAAK,sBAAO,MAAKhJ,KAAL,CAAWwB,SAAlB,CAAT;;AAEAwH,cAAAA,KAAK,CAACzH,CAAD,CAAL,CAAS0H,QAAT,GAAmB,IAAnB;AACAD,cAAAA,KAAK,CAACD,CAAD,CAAL,CAASE,QAAT,GAAoB,IAApB;;AACA,oBAAKpJ,QAAL,CAAc;AAAC2B,gBAAAA,SAAS,EAACwH,KAAX;AAAkB3B,gBAAAA,QAAQ,EAAC;AAA3B,eAAd;;AACA;AACH,aAPD,MAQI;AAEA,kBAAI2B,MAAK,sBAAO,MAAKhJ,KAAL,CAAWwB,SAAlB,CAAT;;AACAwH,cAAAA,MAAK,CAACzH,CAAD,CAAL,CAAS0H,QAAT,GAAmB,KAAnB;AACAD,cAAAA,MAAK,CAACD,CAAD,CAAL,CAASE,QAAT,GAAoB,KAApB;;AACA,oBAAKpJ,QAAL,CAAc;AAAC2B,gBAAAA,SAAS,EAACwH,MAAX;AAAkB3B,gBAAAA,QAAQ,EAAC;AAA3B,eAAd;AACH;AAEJ;AACJ;AACJ;AAEJ,KAxnBkB;;AAAA,UA0nBnB6B,SA1nBmB,GA0nBP,IAAI5K,QAAJ,EA1nBO;AAAA,UA2nBnBkH,KA3nBmB,GA2nBX,EA3nBW;AAAA,UA4nBnBF,UA5nBmB,GA4nBN;AACT6D,MAAAA,IAAI,EAAE,EADG;AAETC,MAAAA,SAAS,EAAE;AAFF,KA5nBM;AAAA,UAgoBnB7D,SAhoBmB,GAgoBP;AACRM,MAAAA,KAAK,EAAE;AACHwD,QAAAA,SAAS,EAAE;AADR;AADC,KAhoBO;;AAAA,UAsoBnBC,kBAtoBmB,GAsoBE,YAAM;AAEvB,UAAIrF,IAAI,GAAG,EAAX;;AACA,WAAK,IAAI1C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,MAAKhC,KAAL,CAAWwC,GAAX,CAAea,SAAf,CAAyBnB,MAA7C,EAAqDF,CAAC,EAAtD,EAA0D;AACtD,YAAIgI,MAAM,GAAG,EAAb;AACAA,QAAAA,MAAM,CAAC1G,IAAP,GAAc,MACTtD,KADS,CAETwC,GAFS,CAGTa,SAHS,CAGCrB,CAHD,EAITR,IAJS,CAKTyC,WALS,KAKO,GALP,GAKa,MACtBjE,KADsB,CAEtBwC,GAFsB,CAGtBa,SAHsB,CAGZrB,CAHY,EAItBsB,IAJsB,CAKtBW,WALsB,EAL3B;AAWA+F,QAAAA,MAAM,CAAC3J,EAAP,GAAY,MAAKL,KAAL,CAAWwC,GAAX,CAAea,SAAf,CAAyBrB,CAAzB,EAA4B3B,EAAxC;AACAqE,QAAAA,IAAI,CAACtC,IAAL,CAAU4H,MAAV;AAEH;;AACD,aAAOtF,IAAP;AACH,KA3pBkB;;AAIf,QAAM3D,KAAI,GAAG,MAAKwC,SAAL,CAAe,MAAKvD,KAAL,CAAWwC,GAAX,CAAeM,KAAf,CAAqB,MAAK9C,KAAL,CAAWwC,GAAX,CAAeyH,aAApC,EAAmDC,OAAnD,CAA2D9I,UAA3D,CAAsEC,OAArF,CAAb;;AAEA,QAAMF,IAAI,GAAGvC,SAAS,CAAC,MAAKoB,KAAL,CAAWwC,GAAX,CAAeM,KAAf,CAAqB,MAAK9C,KAAL,CAAWwC,GAAX,CAAeyH,aAApC,CAAD,CAAtB;AACA,QAAMC,OAAO,GAAGtL,SAAS,CAAC,MAAKoB,KAAL,CAAWwC,GAAX,CAAeM,KAAf,CAAqB,MAAK9C,KAAL,CAAWwC,GAAX,CAAeyH,aAApC,EAAmDC,OAApD,CAAzB;AAEA,UAAKzJ,KAAL,qBAEOU,IAFP,EAGO+I,OAHP;AAIInH,MAAAA,aAAa,EAAE,CAJnB;AAKIoH,MAAAA,YAAY,EAAE,KALlB;AAMIlH,MAAAA,QAAQ,EAAE,KANd;AAOI8B,MAAAA,SAAS,EAAE,KAPf;AAQIxE,MAAAA,KAAK,EAAEQ,KAAI,CAAC,CAAD,CARf;AASIJ,MAAAA,IAAI,EAAEI,KAAI,CAAC,CAAD,CATd;AAUIH,MAAAA,KAAK,EAAEG,KAAI,CAAC,CAAD,CAVf;AAWIF,MAAAA,IAAI,EAAEE,KAAI,CAAC,CAAD,CAXd;AAYI;AACAiC,MAAAA,QAAQ,EAAE,KAbd;AAcItC,MAAAA,WAAW,EAAE,IAdjB;AAeIsE,MAAAA,MAAM,EAAEzF,YAAY,CAAC,MAAKS,KAAL,CAAWwC,GAAX,CAAeM,KAAf,CAAqB,MAAK9C,KAAL,CAAWwC,GAAX,CAAeyH,aAApC,EAAmDC,OAAnD,CAA2D9I,UAA3D,CAAsEE,QAAvE,CAfxB;AAgBIuG,MAAAA,YAAY,EAAE,cAhBlB;AAiBIyB,MAAAA,gBAAgB,EAAC,mBAjBrB;AAkBIxB,MAAAA,QAAQ,EAAE,KAlBd;AAmBIyB,MAAAA,OAAO,EAAE,KAnBb,CAqBA;AACA;;AAtBA;;AAuBA,SAAK,IAAIvH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,MAAKvB,KAAL,CAAWwB,SAAX,CAAqBC,MAAzC,EAAiDF,CAAC,EAAlD,EAAsD;AAClD,YAAKvB,KAAL,CAAWwB,SAAX,CAAqBD,CAArB,EAAwBG,MAAxB,GAAiC,CAAjC;AACA,YAAK1B,KAAL,CAAWwB,SAAX,CAAqBD,CAArB,EAAwB0H,QAAxB,GAAmC,KAAnC;AACH;;AACD,UAAKzD,KAAL,GAAa,MAAK8D,kBAAL,EAAb;AApCe;AAsClB;;;;6BAunBQ;AACL,UAAMK,aAAa,GAAGC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyBF,MAAM,CAACC,QAAP,CAAgBE,QAAzC,GAAoD,mBAA1E;AAEA,aAEI,oBAAC,YAAD,oBACQ,KAAKxK,KADb;AAEI,QAAA,KAAK,EAAC,WAFV;AAGI,QAAA,KAAK,EACH,GAJN;AAKI,QAAA,MAAM,EAAE,KAAKA,KAAL,CAAWwC,GAAX,CAAeiI,MAL3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAOI;AACI,QAAA,SAAS,EAAE,KAAKhK,KAAL,CAAWsC,aAAX,KAA6B,CAA7B,GACT,gBADS,GAET,iBAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAII;AACI,QAAA,SAAS,EAAC,gBADd;AAEI,QAAA,KAAK,EAAC,cAFV;AAGI,QAAA,OAAO,EAAE,KAAKJ,kBAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAJJ,EAQI;AAAK,QAAA,SAAS,EAAC,UAAf;AAA0B,QAAA,OAAO,EAAE,KAAKuC,uBAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,GAAD;AACI,QAAA,GAAG,EAAE,CAAC,KAAKzE,KAAL,CAAWc,KAAX,CAAiBmF,eAAlB,EAAmC0D,aAAnC,CADT;AAEI,QAAA,SAAS,EAAC,iBAFd;AAGI,QAAA,GAAG,EAAC,MAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAKK,KAAK3J,KAAL,CAAWsE,SAAX,GACK,KAAKK,mBAAL,EADL,GAEK,KAAKpB,eAAL,EAPV,EAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,GAAD;AACI,QAAA,GAAG,EAAC,gBADR;AAEI,QAAA,GAAG,EAAE,CAAC,KAAKvD,KAAL,CAAWW,UAAX,CAAsBsJ,kBAAtB,GACAL,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyBF,MAAM,CAACC,QAAP,CAAgBE,QAAzC,GAAoD,OAApD,GAA8D,KAAK/J,KAAL,CAAWW,UAAX,CAAsBsJ,kBAApF,GAAyG,MADzG,GAEAL,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyBF,MAAM,CAACC,QAAP,CAAgBE,QAAzC,GAAoD,YAFrD,CAFT;AAKI,QAAA,OAAO,EAAE,KAAK7G,yBALlB;AAMI,QAAA,SAAS,EAAC,oBANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CARJ,CARJ,EA2BI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,qBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CA3BJ,EA+BI;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACI;AACI,QAAA,KAAK,EAAE,KAAKlD,KAAL,CAAWuE,MAAX,CAAkBC,UAAlB,IAAgC,IAAhC,GACJ,KAAKxE,KAAL,CAAWuE,MAAX,CAAkBC,UAAlB,IAAgC,CAAhC,GACG,KAAKxE,KAAL,CAAWuE,MAAX,CAAkBC,UADrB,GAEG,KAAKxE,KAAL,CAAWW,UAAX,CAAsBuJ,UAHrB,GAIL,EALN;AAMI,QAAA,QAAQ,EAAE,KAAKlK,KAAL,CAAWuE,MAAX,CAAkB4F,QANhC;AAOI,QAAA,QAAQ,EAAE,KAAK5D,gBAPnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOsChI,kBAAkB,CAAC,KAAK2K,SAAL,CAAekB,sBAAhB,CAPxD,CADJ,CADJ,EAYI;AACI,QAAA,SAAS,EAAE,KAAKpK,KAAL,CAAWC,WAAX,GACT,UADS,GAET,gBAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAII,oBAAC,IAAD;AACI,QAAA,KAAK,oBACF,KAAKD,KADH,CADT;AAII,QAAA,MAAM,EAAE,KAAKR,iBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CAZJ,EAsBI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEI;AACI,QAAA,SAAS,EAAC,cADd;AAEI,QAAA,KAAK,EAAE,KAAKQ,KAAL,CAAWW,UAAX,CAAsB0J,UAFjC;AAGI,QAAA,QAAQ,EAAE,KAAK7D,mBAHnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIKjI,kBAAkB,CAAC,KAAK2K,SAAL,CAAeoB,sBAAhB,CAJvB,CAFJ,CADJ,EAUI;AAAM,QAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEI;AACI,QAAA,KAAK,EAAE,KAAKtK,KAAL,CAAWW,UAAX,CAAsB4J,QAAtB,KAAmC,IAAnC,GACL,EADK,GAEL,KAAKvK,KAAL,CAAWW,UAAX,CAAsB4J,QAH5B;AAII,QAAA,QAAQ,EAAE,KAAK9D,qBAJnB;AAKI,QAAA,IAAI,EAAC,GALT;AAMI,QAAA,SAAS,EAAC,UANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CAVJ,CAtBJ,EA4CI;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AACI,QAAA,KAAK,EAAE,KAAKzG,KAAL,CAAWwB,SADtB;AAEI,QAAA,IAAI,EAAE,IAFV;AAGI,QAAA,MAAM,EAAE,KAAKkF,qBAHjB;AAII,QAAA,GAAG,EAAE,KAAKa,kBAJd;AAKI,QAAA,MAAM,EAAE,KAAKiB,qBALjB;AAMI,QAAA,KAAK,EAAE,KAAKtB,2BANhB;AAOI,QAAA,OAAO,EAAE,KAAKlH,KAAL,CAAW8I,OAPxB;AAQI,QAAA,MAAM,EAAE,KAAK9I,KAAL,CAAWyJ,OAAX,CAAmB9I,UAAnB,CAA8BkH,QAR1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CA5CJ,EAuDI;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,OAAO,EAAE,KAAKrH,gBAAtB;AAAwC,QAAA,QAAQ,EAAE,KAAKR,KAAL,CAAWqH,QAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EAEI;AAAQ,QAAA,OAAO,EAAE,KAAKnF,kBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,CAvDJ,EA4DI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAM,KAAKlC,KAAL,CAAWoH,YAAjB,CA5DJ,EA6DI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAO,KAAKpH,KAAL,CAAW6I,gBAAlB,CA7DJ,CA/BJ,CAPJ,EAwGI;AACI,QAAA,SAAS,EAAE,KAAK7I,KAAL,CAAWsC,aAAX,KAA6B,CAA7B,GACT,gBADS,GAET,iBAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAII;AACI,QAAA,SAAS,EAAC,gBADd;AAEI,QAAA,KAAK,EAAC,cAFV;AAGI,QAAA,OAAO,EAAE,KAAKJ,kBAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAJJ,wCAQsC;AAAO,QAAA,SAAS,EAAC,cAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAC9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AACA,QAAA,GAAG,EAAC,GADJ;AAEA,QAAA,GAAG,EAAC,WAFJ;AAGA,QAAA,SAAS,EAAC,SAHV;AAIA,QAAA,OAAO,EAAE,KAAKkB,sBAJd;AAKA,QAAA,EAAE,EAAC,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CADJ,EAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AACA,QAAA,GAAG,EAAC,GADJ;AAEA,QAAA,GAAG,EAAC,WAFJ;AAGA,QAAA,SAAS,EAAC,SAHV;AAIA,QAAA,OAAO,EAAE,KAAKA,sBAJd;AAKA,QAAA,EAAE,EAAC,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CAPJ,EAaI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AACA,QAAA,GAAG,EAAC,GADJ;AAEA,QAAA,GAAG,EAAC,WAFJ;AAGA,QAAA,SAAS,EAAC,SAHV;AAIA,QAAA,OAAO,EAAE,KAAKA,sBAJd;AAKA,QAAA,EAAE,EAAC,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CAbJ,CADJ,EAsBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AACA,QAAA,GAAG,EAAC,GADJ;AAEA,QAAA,GAAG,EAAC,WAFJ;AAGA,QAAA,SAAS,EAAC,SAHV;AAIA,QAAA,OAAO,EAAE,KAAKA,sBAJd;AAKA,QAAA,EAAE,EAAC,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CADJ,EAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AACA,QAAA,GAAG,EAAC,GADJ;AAEA,QAAA,GAAG,EAAC,WAFJ;AAGA,QAAA,SAAS,EAAC,SAHV;AAIA,QAAA,OAAO,EAAE,KAAKA,sBAJd;AAKA,QAAA,EAAE,EAAC,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CAPJ,EAaI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AACA,QAAA,GAAG,EAAC,GADJ;AAEA,QAAA,GAAG,EAAC,WAFJ;AAGA,QAAA,SAAS,EAAC,SAHV;AAIA,QAAA,OAAO,EAAE,KAAKA,sBAJd;AAKA,QAAA,EAAE,EAAC,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CAbJ,CAtBJ,EA2CI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AACA,QAAA,GAAG,EAAC,GADJ;AAEA,QAAA,GAAG,EAAC,WAFJ;AAGA,QAAA,SAAS,EAAC,SAHV;AAIA,QAAA,OAAO,EAAE,KAAKA,sBAJd;AAKA,QAAA,EAAE,EAAC,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CADJ,EAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AACA,QAAA,GAAG,EAAC,GADJ;AAEA,QAAA,GAAG,EAAC,WAFJ;AAGA,QAAA,SAAS,EAAC,SAHV;AAIA,QAAA,OAAO,EAAE,KAAKA,sBAJd;AAKA,QAAA,EAAE,EAAC,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CAPJ,EAaI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AACA,QAAA,GAAG,EAAC,GADJ;AAEA,QAAA,GAAG,EAAC,WAFJ;AAGA,QAAA,SAAS,EAAC,SAHV;AAIA,QAAA,OAAO,EAAE,KAAKA,sBAJd;AAKA,QAAA,EAAE,EAAC,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CAbJ,CA3CJ,EAgEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AACA,QAAA,GAAG,EAAC,GADJ;AAEA,QAAA,GAAG,EAAC,WAFJ;AAGA,QAAA,SAAS,EAAC,SAHV;AAIA,QAAA,OAAO,EAAE,KAAKA,sBAJd;AAKA,QAAA,EAAE,EAAC,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CADJ,EAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAPJ,CAhEJ,CAD8B,CARtC,EAqFI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDArFJ,CAxGJ,CAFJ;AAmMH;;;;EAr2BmCnF,S;;SAAnBqB,U","sourcesContent":["import React, {Component, Fragment} from 'react'\r\nimport cloneDeep from 'lodash.clonedeep';\r\n\r\nimport Img from 'react-image'\r\nimport './SignEditor.css'\r\n\r\nimport ModalWrapper from '../Modals/ModalWrapper';\r\nimport {SignType, addOptionsToSelect} from '../../../SignworksJSON';\r\n\r\nimport {muttGenerator, layerURLs} from \"../../../utils/JSAPI\";\r\nimport Downshift from 'downshift'\r\nimport Timebands from '../Timebands/Timebands';\r\nimport Zone from './Zone';\r\nimport {MutcdDuplicate, isSpeedLimit, zoneVerify, timebandVerify} from './SignValidations';\r\n\r\nlet Typeahead = require('react-typeahead').Typeahead;\r\n\r\nconst myRef = React.createRef();\r\nconst amp = /[&]/;\r\n\r\nexport default class SignEditor extends Component {\r\n\r\n    constructor(props) {\r\n\r\n        super(props)\r\n\r\n        const zone = this.zoneParse(this.props.map.signs[this.props.map.editSignIndex].feature.attributes.ZONE_ID)\r\n\r\n        const sign = cloneDeep(this.props.map.signs[this.props.map.editSignIndex]);\r\n        const feature = cloneDeep(this.props.map.signs[this.props.map.editSignIndex].feature);\r\n\r\n        this.state = {\r\n\r\n            ...sign,\r\n            ...feature,\r\n            paneSelection: 1,\r\n            muttSelected: false,\r\n            showInfo: false,\r\n            muttInput: false,\r\n            ward1: zone[0],\r\n            anc1: zone[1],\r\n            ward2: zone[2],\r\n            anc2: zone[3],\r\n            //validation keys\r\n            muttDupe: false,\r\n            zoneChecked: true,\r\n            speedo: isSpeedLimit(this.props.map.signs[this.props.map.editSignIndex].feature.attributes.SIGNCODE),\r\n            errorMessage: \"no error yet\",\r\n            collisionMessage:\"no collisions yet\",\r\n            cantSave: false,\r\n            cantAdd: false\r\n        }\r\n        // the action property is just being arbitrarily tacked on here, I will use it\r\n        // to sort the timebands for edits, adds, deletes, and no action\r\n        for (let i = 0; i < this.state.timebands.length; i++) {\r\n            this.state.timebands[i].action = 0;\r\n            this.state.timebands[i].conflict = false;\r\n        }\r\n        this.items = this.formattedMuttArray();\r\n\r\n    }\r\n\r\n    zoneChangeHandler = (evt) => {\r\n        let Checksky = true;\r\n        switch (evt.target.id) {\r\n            case \"ward1\":\r\n                this.setState({\r\n                    ward1: evt.target.value\r\n                }, function () {\r\n                    Checksky = zoneVerify(this.state)\r\n                    this.setState({zoneChecked: Checksky})\r\n\r\n                });\r\n                break;\r\n            case \"anc1\":\r\n                this.setState({\r\n                    anc1: evt.target.value\r\n                }, function () {\r\n                    Checksky = zoneVerify(this.state)\r\n                    this.setState({zoneChecked: Checksky})\r\n\r\n                });\r\n                break;\r\n            case \"ward2\":\r\n                this.setState({\r\n                    ward2: evt.target.value\r\n                }, function () {\r\n                    Checksky = zoneVerify(this.state)\r\n                    this.setState({zoneChecked: Checksky})\r\n\r\n                });\r\n                break;\r\n            case \"anc2\":\r\n                this.setState({\r\n                    anc2: evt.target.value\r\n                }, function () {\r\n                    Checksky = zoneVerify(this.state)\r\n                    this.setState({zoneChecked: Checksky})\r\n\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    zoneAssembler = () => {\r\n\r\n        // this.state.ward1 + this.state.anc1 + \"&\" + this.state.ward2 + this.state.anc2\r\n        let zone = 'ndad';\r\n        if (this.state.ward1) {\r\n\r\n            zone = this\r\n                .state\r\n                .ward1\r\n                .toString();\r\n\r\n        } else {\r\n            return \"\"\r\n        }\r\n\r\n        if (this.state.anc1) {\r\n\r\n            zone += this\r\n                .state\r\n                .anc1\r\n                .toString();\r\n\r\n        }\r\n        if (this.state.ward1 && this.state.ward2) {\r\n\r\n            zone += \"&\" + this\r\n                .state\r\n                .ward2\r\n                .toString();\r\n\r\n        } else {\r\n            return zone\r\n        }\r\n        if (this.state.ward2 && this.state.anc2) {\r\n\r\n            return zone + this\r\n                .state\r\n                .anc2\r\n                .toString();\r\n        } else {\r\n            return zone\r\n        }\r\n    }\r\n\r\n    saveClickHandler = () => {\r\n\r\n        const editedFeature = {};\r\n\r\n        editedFeature.sign = {}\r\n        editedFeature.sign.attributes = {\r\n            ...this.state.attributes\r\n        };\r\n        /*  if (editedFeature.sign.attributes.SIGNARROWDIRECTION === 0) {\r\n            editedFeature.sign.attributes.SIGNARROWDIRECTION = null;\r\n        }  */\r\n\r\n        editedFeature.sign.attributes.ZONE_ID = this.zoneAssembler();\r\n\r\n        editedFeature.sign.attributes.SIGNCODE = this.state.MUTCD.code;\r\n        editedFeature.editBands = [];\r\n        editedFeature.newBands = [];\r\n        editedFeature.deleteBands = [];\r\n\r\n        editedFeature.sign.attributes.SIGNWORKS_LAST_EDITED_BY = this.props.auth.user.username;\r\n\r\n        for (let i = 0; i < this.state.timebands.length; i++) {\r\n\r\n            switch (this.state.timebands[i].action) {\r\n                case 1:\r\n                    editedFeature\r\n                        .newBands\r\n                        .push(this.state.timebands[i]);\r\n                    break;\r\n                case 2:\r\n                    editedFeature\r\n                        .editBands\r\n                        .push(this.state.timebands[i]);\r\n                    break;\r\n                case 3:\r\n                    editedFeature\r\n                        .deleteBands\r\n                        .push(this.state.timebands[i].attributes.OBJECTID);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n        }\r\n        const layers = layerURLs(this.props);\r\n\r\n        this\r\n            .props\r\n            .saveSign(this.props.map.support, editedFeature, layers)\r\n        this\r\n            .props\r\n            .modalClicked(false, null)\r\n    }\r\n\r\n    cancelClickHandler = () => {\r\n        //this cancels the editor window\r\n        this\r\n            .props\r\n            .modalClicked(false, null)\r\n    }\r\n\r\n    muttSelectorSaveHandler = () => {\r\n        //\r\n        const result = MutcdDuplicate(this.state.MUTCD.code, this.props.map.signs)\r\n\r\n        this.setState({paneSelection: 1, muttDupe: result, showInfo: false})\r\n    }\r\n\r\n    cancelSelectionHandler = (evt) => {\r\n        this.setState({showInfo: false})\r\n    }\r\n\r\n    getOptions = () => {\r\n        let bob = [];\r\n        for (let i = 0; i < this.props.map.muttArray.length; i++) {\r\n            bob.push(this.props.map.muttArray[i].code + \": \" + this.props.map.muttArray[i].name)\r\n        }\r\n\r\n        return bob;\r\n\r\n    }\r\n\r\n    zoneParse = (zoneValue) => {\r\n        // why don't we just set the controls directly?  Because they don't exist yet.\r\n        // we don't have to check for all possible garbage because the zoneValue has\r\n        // already passed ZoneVerify Don't run this without running and passing\r\n        // zoneVerify first!\r\n        let zoneArray = [];\r\n        if (zoneValue) {\r\n            // set first cell\r\n            zoneArray[0] = zoneValue[0]\r\n        } else {\r\n            //empty zone id\r\n            return \"\";\r\n        }\r\n        // set second cell\r\n        if (!zoneValue[1]) {\r\n            //just one ward no anc\r\n            return zoneArray;\r\n        } else if (amp.test(zoneValue[1])) {\r\n            //second digit is amp so third must be ward\r\n            zoneArray[2] = zoneValue[2];\r\n            if (!zoneValue[3]) {\r\n                // ward + amp + ward and done\r\n                return zoneArray;\r\n            } else {\r\n                //ward + amp + ward + anc and done\r\n                zoneArray[3] = zoneValue[3];\r\n                return zoneArray;\r\n            }\r\n        } else {\r\n            //ward + anc + ...\r\n            zoneArray[1] = zoneValue[1];\r\n            if (amp.test(zoneValue[2])) {\r\n                zoneArray[2] = zoneValue[3];\r\n                if (!zoneValue[4]) {\r\n                    // ward + anc + amp + ward and done\r\n                    return zoneArray;\r\n                } else {\r\n                    // ward + anc + amp + ward + anc\r\n                    zoneArray[3] = zoneValue[4];\r\n                    return zoneArray;\r\n                }\r\n            } else {\r\n                // ward + anc and done\r\n                return zoneArray;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    signDirectionClickHandler = (evt) => {\r\n\r\n        this.setState({paneSelection: 3})\r\n        evt.stopPropagation()\r\n    }\r\n\r\n    signArrowSelectHandler = (evt) => {\r\n        let id = Number(evt.target.id.charAt(4))\r\n\r\n        this.setState({\r\n            attributes: {\r\n                ...this.state.attributes,\r\n                'SIGNARROWDIRECTION': id\r\n            },\r\n            paneSelection: 1\r\n        })\r\n\r\n    }\r\n\r\n    renderMuttInput = () => {\r\n\r\n        return <span\r\n            className={this.state.muttDupe\r\n            ? \"InnerMUTCD_error\"\r\n            : \"InnerMUTCD\"}>\r\n            <div className=\"EditorMuttCode\">\r\n                {this\r\n                    .state\r\n                    .MUTCD\r\n                    .name\r\n                    .toUpperCase()}:\r\n            </div>\r\n            <div className=\"EditorMuteDesc\">\r\n                {this.state.MUTCD.name}\r\n            </div>\r\n\r\n        </span>\r\n\r\n    }\r\n\r\n    mutcdLookUpSelectHandler = (desc) => {\r\n\r\n        let option = desc\r\n            .name\r\n            .split(':')\r\n\r\n        let chosenOne = this\r\n            .props\r\n            .map\r\n            .muttArray\r\n            .find(function (element) {\r\n                return element\r\n                    .code\r\n                    .toLowerCase() === option[0].toLowerCase()\r\n            })\r\n\r\n        const mutt = muttGenerator(chosenOne).next();\r\n\r\n        const newSpeedo = isSpeedLimit(chosenOne.code);\r\n\r\n        this.setState({\r\n            MUTCD: mutt.value.payload.args[0][0],\r\n            muttInput: false,\r\n            showInfo: true,\r\n            speedo: newSpeedo,\r\n            attributes: {\r\n                ...this.state.attributes,\r\n                'SIGNNUMBER': newSpeedo.speedLimit\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    muttSelectorOpenHandler = (evt) => {\r\n\r\n        this.setState({muttInput: true})\r\n    }\r\n\r\n    cancelLookupHandler = (evt) => {\r\n\r\n        this.setState({muttInput: false});\r\n        evt.stopPropagation()\r\n\r\n    }\r\n\r\n    renderMuttDownshift = () => {\r\n\r\n        return <Fragment>\r\n            <label onClick={this.cancelLookupHandler} className=\"DownshiftLabel\">\r\n                X\r\n            </label>\r\n            <Downshift\r\n                onChange=\r\n                {(sel) => this.mutcdLookUpSelectHandler(sel)}\r\n                itemToString={item => (item\r\n                ? item.name\r\n                : '')}>\r\n                {({\r\n                    getInputProps,\r\n                    getItemProps,\r\n                    getLabelProps,\r\n                    getMenuProps,\r\n                    isOpen,\r\n                    inputValue,\r\n                    highlightedIndex,\r\n                    selectedItem\r\n                }) => (\r\n                    <div>\r\n\r\n                        <input {...getInputProps(this.inputProps)}/>\r\n                        <ul {...getMenuProps(this.menuProps)}>\r\n\r\n                            {isOpen\r\n                                ? this\r\n                                    .items\r\n                                    .filter(item => !inputValue || item.name.includes(inputValue.toUpperCase()))\r\n                                    .map((item, index) => (\r\n                                        <li\r\n                                            {...getItemProps({ key: item.id, index, item, style: { backgroundColor: highlightedIndex === index ? 'lightgray' : 'white', fontWeight: selectedItem === item ? 'bold' : 'normal', }, })}>\r\n                                            {item.name}\r\n                                        </li>\r\n                                    ))\r\n                                : null}\r\n                        </ul>\r\n                    </div>\r\n                )}\r\n            </Downshift>\r\n        </Fragment>\r\n    }\r\n\r\n    readMUTCDinfo = () => {\r\n\r\n        return (\r\n            <div>\r\n                <img\r\n                    src={this.state.MUTCD.serverImagePath}\r\n                    className=\"SignEditorImage\"\r\n                    alt=\"sign\"></img>\r\n                <div>{this.state.MUTCD.code}\r\n                    : {this.state.MUTCD.name}</div>\r\n                <div>Tags:{this.state.MUTCD.tags}</div>\r\n\r\n                <ul>\r\n                    {this.state.MUTCD.isParking\r\n                        ? <li>Parking Sign</li>\r\n                        : \"\"}\r\n                    {this.state.MUTCD.isSpeedLimit\r\n                        ? <li>Speed Limit Sign</li>\r\n                        : \"\"}\r\n                    {this.state.MUTCD.isNonstandard\r\n                        ? <li>Non-Standard Sign</li>\r\n                        : \"\"}\r\n                    {this.state.MUTCD.needsArrow\r\n                        ? <li>Requires Direction Arrow</li>\r\n                        : \"\"}\r\n                    {this.state.MUTCD.needsTimeband\r\n                        ? <li>Requires Time Restriction</li>\r\n                        : \"\"}\r\n\r\n                </ul>\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n    MPHSelectHandler = (evt) => {;\r\n        this.setState({\r\n            attributes: {\r\n                ...this.state.attributes,\r\n                'SIGNNUMBER': Number(evt.target.value)\r\n            }\r\n        });\r\n    }\r\n\r\n    statusChangeHandler = (evt) => {\r\n\r\n        this.setState({\r\n            attributes: {\r\n                ...this.state.attributes,\r\n                \"SIGNSTATUS\": Number(evt.target.value)\r\n            }\r\n        })\r\n    }\r\n\r\n    signTextChangeHandler = (evt) => {\r\n\r\n        this.setState({\r\n            attributes: {\r\n                ...this.state.attributes,\r\n                \"SIGNTEXT\": evt.target.value\r\n            }\r\n        })\r\n    }\r\n\r\n    //Timeband Handlers\r\n\r\n    timebandChangeHandler = (evt, index, ctrl) => {\r\n\r\n        let bands = this.state.timebands;\r\n\r\n        switch (ctrl) {\r\n\r\n            case 0:\r\n\r\n                bands[index].attributes.STARTDAY = Number(evt.target.value);\r\n                bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = this.props.auth.user.username;\r\n\r\n                break;\r\n            case 1:\r\n                bands[index].attributes.ENDDAY = Number(evt.target.value);\r\n                bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = this.props.auth.user.username;\r\n                break;\r\n            case 2:\r\n                bands[index].attributes.STARTTIME = Number(evt.target.value);\r\n                bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = this.props.auth.user.username;\r\n                break;\r\n            case 3:\r\n                bands[index].attributes.ENDTIME = Number(evt.target.value);\r\n                bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = this.props.auth.user.username;\r\n                break;\r\n            case 4:\r\n                bands[index].attributes.HOURLIMIT = Number(evt.target.value);\r\n                bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = this.props.auth.user.username;\r\n                break;\r\n            case 5:\r\n\r\n                bands[index].attributes.STARTDAY = Number(evt.target.value);\r\n                bands[index].attributes.ENDDAY = 0;\r\n                bands[index].attributes.STARTTIME = 0;\r\n                bands[index].attributes.ENDTIME = 0;\r\n                bands[index].attributes.HOURLIMIT = 0;\r\n                bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = this.props.auth.user.username;\r\n                break;\r\n            case 6:\r\n\r\n                bands[index].attributes.STARTDAY = Number(evt.target.value);\r\n                bands[index].attributes.ENDDAY = 0;\r\n                bands[index].attributes.SIGNWORKS_LAST_EDITED_BY = this.props.auth.user.username;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        timebandVerify(bands[index])\r\n\r\n        // set action to edit if existing record, unedited or already scheduled for\r\n        // editing records marked for add or delete will retain their current action\r\n        if (bands[index].action === 0 || bands[index].action === 2) {\r\n\r\n            bands[index].action = 2;\r\n        }\r\n\r\n        this.setState({\r\n            timebands: [...bands]\r\n        })\r\n    }\r\n\r\n    timebandErrorMessageHandler = (msg) => {\r\n\r\n        this.setState({errorMessage: msg})\r\n        if (msg == \"\") {\r\n            this.setState({cantSave: false})\r\n        } else {\r\n            this.setState({cantSave: true})\r\n        }\r\n        this.timebandCollisionHandler();\r\n    }\r\n\r\n    timebandAddHandler = (signId) => {\r\n\r\n        let bands = [...this.state.timebands]\r\n        const newBand = {\r\n            attributes: {\r\n                CREATED_DATE: null,\r\n                CREATED_USER: null,\r\n                ENDDAY: 0,\r\n                ENDTIME: 0,\r\n                EXCEPTION: null,\r\n                GLOBALID: null,\r\n                HOURLIMIT: 0,\r\n                LAST_EDITED_DATE: null,\r\n                LAST_EDITED_USER: null,\r\n                LINKID: null,\r\n                OBJECTID: null,\r\n                ORIGIN_ID: null,\r\n                RESTRICTIONORDER: null,\r\n                RESTRICTIONSTATUS: null,\r\n                SIGNID: signId,\r\n                SPACEARROW: null,\r\n                SPACEID: null,\r\n                STARTDAY: 8,\r\n                STARTTIME: 0,\r\n                SIGNWORKS_CREATED_BY: this.props.auth.user.username,\r\n                SIGNWORKS_LAST_EDITED_BY: this.props.auth.user.username\r\n            },\r\n            action: 1\r\n        }\r\n\r\n        bands.push(newBand);\r\n        this.setState({\r\n            timebands: [...bands]\r\n        })\r\n    }\r\n\r\n    timebandDeleteHandler = (evt, index, del) => {\r\n\r\n        let bands = [...this.state.timebands]\r\n        // if it is an existing record , edited or not, mark for deletion\r\n        if (bands[index].action === 0 || bands[index].action === 2) {\r\n            bands[index].action = 3 // if it is a new record, set to zero and it will disappear on save\r\n\r\n        } else {\r\n            bands[index].action = 0\r\n        }\r\n\r\n        this.setState({\r\n            timebands: [...bands]\r\n        })\r\n    }\r\n\r\n    timebandComparer = (band1, band2) => {\r\n      \r\n        if( band1.attributes.STARTDAY === 8 || band2.attributes.STARTDAY ===8 ){\r\n            this.setState({collisionMessage:\"Can't have another time restriction with ANYTIME\"})\r\n            return true;\r\n        }\r\n        else if(band1.attributes.STARTDAY < band2.attributes.STARTDAY && band1.attributes.ENDDAY > band2.attributes.STARTDAY){\r\n            this.setState({collisionMessage:\"Time 2 starts during Time 1\"});\r\n            return true;\r\n        }\r\n        else{\r\n            this.setState({collisionMessage: \"\"})\r\n        }\r\n        return false;\r\n    }\r\n\r\n    timebandCollisionHandler = () => {\r\n\r\n        if (this.state.timebands.length === 1) {\r\n            if (this.state.timebands[0].attributes.STARTDAY === 8) {\r\n                this.setState({cantAdd: true})\r\n            } else {\r\n                this.setState({cantAdd: false})\r\n            }\r\n            return;\r\n        }\r\n        if (this.state.timebands.length > 1) {\r\n            for (let i = 0; i < this.state.timebands.length; i++) {\r\n                for (let j = 0; j < this.state.timebands.length; j++) {\r\n                    if(i === j){\r\n                        continue;\r\n                    }\r\n                    if (this.timebandComparer(this.state.timebands[i], this.state.timebands[j])) {\r\n                        let bandz = [...this.state.timebands];\r\n                      \r\n                        bandz[i].conflict= true;\r\n                        bandz[j].conflict = true;\r\n                        this.setState({timebands:bandz, cantSave:true});\r\n                        return;\r\n                    }\r\n                    else{\r\n                      \r\n                        let bandz = [...this.state.timebands];\r\n                        bandz[i].conflict= false;\r\n                        bandz[j].conflict = false;\r\n                        this.setState({timebands:bandz, cantSave:false});\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    signTypes = new SignType();\r\n    items = [];\r\n    inputProps = {\r\n        size: 30,\r\n        autoFocus: true\r\n    };\r\n    menuProps = {\r\n        style: {\r\n            listStyle: 'none'\r\n        }\r\n    };\r\n\r\n    formattedMuttArray = () => {\r\n\r\n        let mutt = [];\r\n        for (let i = 0; i < this.props.map.muttArray.length; i++) {\r\n            let leMutt = {};\r\n            leMutt.name = this\r\n                .props\r\n                .map\r\n                .muttArray[i]\r\n                .code\r\n                .toUpperCase() + \":\" + this\r\n                .props\r\n                .map\r\n                .muttArray[i]\r\n                .name\r\n                .toUpperCase();\r\n            leMutt.id = this.props.map.muttArray[i].id;\r\n            mutt.push(leMutt);\r\n\r\n        }\r\n        return mutt;\r\n    }\r\n\r\n    render() {\r\n        const imgServerDown = window.location.origin + window.location.pathname + \"/img/PR-OTHER.png\"\r\n\r\n        return (\r\n\r\n            <ModalWrapper\r\n                {...this.props}\r\n                title=\"Edit Sign\"\r\n                width\r\n                ={400}\r\n                showOk={this.props.map.showOk}>\r\n\r\n                <div\r\n                    className={this.state.paneSelection === 1\r\n                    ? \"SignEditorOver\"\r\n                    : \"SignEditorUnder\"}>\r\n                    <div\r\n                        className=\"SignEditCancel\"\r\n                        title=\"Close Window\"\r\n                        onClick={this.cancelClickHandler}>X</div>\r\n                    <div className=\"MUTCDdiv\" onClick={this.muttSelectorOpenHandler}>\r\n                        <Img\r\n                            src={[this.state.MUTCD.serverImagePath, imgServerDown]}\r\n                            className=\"SignEditorImage\"\r\n                            alt=\"sign\"></Img>\r\n                        {this.state.muttInput\r\n                            ? this.renderMuttDownshift()\r\n                            : this.renderMuttInput()}\r\n                        <span>\r\n                            <Img\r\n                                alt=\"sign direction\"\r\n                                src={[this.state.attributes.SIGNARROWDIRECTION\r\n                                    ? window.location.origin + window.location.pathname + \"/img/\" + this.state.attributes.SIGNARROWDIRECTION + \".png\"\r\n                                    : window.location.origin + window.location.pathname + \"/img/0.png\"]}\r\n                                onClick={this.signDirectionClickHandler}\r\n                                className=\"SignDirectionArrow\"></Img>\r\n                        </span>\r\n\r\n                    </div>\r\n                    <div>\r\n                        <hr className=\"EditorHorizontalBar\"/>\r\n                    </div>\r\n\r\n                    <div className=\"SignAttributes\">\r\n                        <span>MPH:\r\n                            <select\r\n                                value={this.state.speedo.speedLimit != null\r\n                                ? (this.state.speedo.speedLimit != 0\r\n                                    ? this.state.speedo.speedLimit\r\n                                    : this.state.attributes.SIGNNUMBER)\r\n                                : \"\"}\r\n                                disabled={this.state.speedo.disabled}\r\n                                onChange={this.MPHSelectHandler}>{addOptionsToSelect(this.signTypes._codedValuesSpeedLimit)}\r\n                            </select>\r\n                        </span>\r\n                        <span\r\n                            className={this.state.zoneChecked\r\n                            ? \"ZoneSpan\"\r\n                            : \"ZoneSpan_error\"}>\r\n                            <Zone\r\n                                props={{\r\n                                ...this.state\r\n                            }}\r\n                                change={this.zoneChangeHandler}></Zone>\r\n                        </span>\r\n                        <div className=\"StatusDiv\">\r\n                            <span >\r\n                                Status:\r\n                                <select\r\n                                    className=\"StatusSelect\"\r\n                                    value={this.state.attributes.SIGNSTATUS}\r\n                                    onChange={this.statusChangeHandler}>\r\n                                    {addOptionsToSelect(this.signTypes._codedValuesSignStatus)}</select>\r\n\r\n                            </span>\r\n                            <span className=\"SignTextSpan\">\r\n                                Sign Text:\r\n                                <textarea\r\n                                    value={this.state.attributes.SIGNTEXT === null\r\n                                    ? \"\"\r\n                                    : this.state.attributes.SIGNTEXT}\r\n                                    onChange={this.signTextChangeHandler}\r\n                                    rows=\"4\"\r\n                                    className=\"SignText\"></textarea>\r\n                            </span>\r\n\r\n                        </div>\r\n                        <div className=\"TimebandDiv\">\r\n                            <Timebands\r\n                                bands={this.state.timebands}\r\n                                edit={true}\r\n                                change={this.timebandChangeHandler}\r\n                                add={this.timebandAddHandler}\r\n                                delete={this.timebandDeleteHandler}\r\n                                error={this.timebandErrorMessageHandler}\r\n                                cantAdd={this.state.cantAdd}\r\n                                signId={this.state.feature.attributes.GLOBALID}></Timebands>\r\n                        </div>\r\n                        <div className=\"SignEditButtonDiv\">\r\n                            <button onClick={this.saveClickHandler} disabled={this.state.cantSave}>SAVE</button>\r\n                            <button onClick={this.cancelClickHandler}>CANCEL\r\n                            </button>\r\n                        </div>\r\n                        <div>{this.state.errorMessage}</div>\r\n                        <div> {this.state.collisionMessage}</div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div\r\n                    className={this.state.paneSelection === 3\r\n                    ? \"SignEditorOver\"\r\n                    : \"SignEditorUnder\"}>\r\n                    <div\r\n                        className=\"SignEditCancel\"\r\n                        title=\"Close Window\"\r\n                        onClick={this.cancelClickHandler}>X</div>\r\n                    SIGN ARROW DIRECTION SELECTOR TOOL<table className=\"dirSignTable\">\r\n                        <tbody>\r\n                            <tr>\r\n                                <td><img\r\n                                    alt=\"6\"\r\n                                    src=\"img/6.png\"\r\n                                    className=\"dirSign\"\r\n                                    onClick={this.signArrowSelectHandler}\r\n                                    id=\"dir_6\"/></td>\r\n                                <td><img\r\n                                    alt=\"4\"\r\n                                    src=\"img/4.png\"\r\n                                    className=\"dirSign\"\r\n                                    onClick={this.signArrowSelectHandler}\r\n                                    id=\"dir_4\"/></td>\r\n                                <td><img\r\n                                    alt=\"8\"\r\n                                    src=\"img/8.png\"\r\n                                    className=\"dirSign\"\r\n                                    onClick={this.signArrowSelectHandler}\r\n                                    id=\"dir_8\"/>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td><img\r\n                                    alt=\"1\"\r\n                                    src=\"img/1.png\"\r\n                                    className=\"dirSign\"\r\n                                    onClick={this.signArrowSelectHandler}\r\n                                    id=\"dir_1\"/></td>\r\n                                <td><img\r\n                                    alt=\"3\"\r\n                                    src=\"img/3.png\"\r\n                                    className=\"dirSign\"\r\n                                    onClick={this.signArrowSelectHandler}\r\n                                    id=\"dir_3\"/></td>\r\n                                <td><img\r\n                                    alt=\"2\"\r\n                                    src=\"img/2.png\"\r\n                                    className=\"dirSign\"\r\n                                    onClick={this.signArrowSelectHandler}\r\n                                    id=\"dir_2\"/>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td><img\r\n                                    alt=\"7\"\r\n                                    src=\"img/7.png\"\r\n                                    className=\"dirSign\"\r\n                                    onClick={this.signArrowSelectHandler}\r\n                                    id=\"dir_7\"/></td>\r\n                                <td><img\r\n                                    alt=\"5\"\r\n                                    src=\"img/5.png\"\r\n                                    className=\"dirSign\"\r\n                                    onClick={this.signArrowSelectHandler}\r\n                                    id=\"dir_5\"/></td>\r\n                                <td><img\r\n                                    alt=\"9\"\r\n                                    src=\"img/9.png\"\r\n                                    className=\"dirSign\"\r\n                                    onClick={this.signArrowSelectHandler}\r\n                                    id=\"dir_9\"/>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td><img\r\n                                    alt=\"0\"\r\n                                    src=\"img/0.png\"\r\n                                    className=\"dirSign\"\r\n                                    onClick={this.signArrowSelectHandler}\r\n                                    id=\"dir_0\"/></td>\r\n                                <td>(no direction)\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <p>Click A Selection to Return To The Editor</p>\r\n                </div>\r\n            </ModalWrapper>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}