{"ast":null,"code":"import _objectSpread from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Projects\\\\Signworks3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Projects\\\\Signworks3\\\\src\\\\components\\\\myModules\\\\Signs\\\\SignEditor.js\";\nimport React, { Component } from 'react';\nimport { call } from 'redux-saga/effects';\nimport Img from 'react-image';\nimport './SignEditor.css';\nimport ModalWrapper from '../Modals/ModalWrapper';\nimport { SignType, addOptionsToSelect } from '../../../SignworksJSON';\n\nvar Typeahead = require('react-typeahead').Typeahead;\n\nvar myRef = React.createRef();\n\nvar SignEditor =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignEditor, _Component);\n\n  function SignEditor(props) {\n    var _this;\n\n    _classCallCheck(this, SignEditor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignEditor).call(this, props));\n\n    _this.saveClickHandler = function () {//gotta implement, this one saves the sign/timebands to the server\n    };\n\n    _this.cancelClickHandler = function () {\n      //this cancels the editor window\n      _this.props.modalClicked(false, null);\n    };\n\n    _this.muttSelectorOpenHandler = function () {\n      _this.setState({\n        paneSelection: 2,\n        showInfo: false\n      });\n    };\n\n    _this.muttSelectorSaveHandler = function () {\n      //\n      _this.setState({\n        paneSelection: 1,\n        showInfo: false,\n        MUTCD: _this.state.selMUTCD\n      });\n    };\n\n    _this.cancelMUTCDselectHandler = function () {\n      _this.setState({\n        paneSelection: 1,\n        showInfo: false\n      });\n    };\n\n    _this.mutcdLookUpSelectHandler = function (desc) {\n      var option = desc.split(':');\n\n      var chosenOne = _this.props.map.muttArray.find(function (element) {\n        return element.code === option[0];\n      }); //myRef.current.focus();\n\n\n      _this.setState({\n        showInfo: true,\n        selMUTCD: chosenOne\n      }); //this.muttSelectorHandler()\n\n    };\n\n    _this.cancelSelectionHandler = function (evt) {\n      _this.setState({\n        showInfo: false\n      });\n    };\n\n    _this.getOptions = function () {\n      var bob = [];\n\n      for (var i = 0; i < _this.props.map.muttArray.length; i++) {\n        bob.push(_this.props.map.muttArray[i].code + \": \" + _this.props.map.muttArray[i].name);\n      }\n\n      return bob;\n    };\n\n    _this.signDirectionClickHandler = function (evt) {\n      _this.setState({\n        paneSelection: 3\n      });\n\n      evt.stopPropagation();\n    };\n\n    _this.signArrowSelectHandler = function (evt) {\n      var id = Number(evt.target.id.charAt(4));\n    };\n\n    _this.readMUTCDinfo = function () {\n      // console.log('from store', this.state.MUTCD)  console.log('from state',\n      // this.state.selMUTCD)\n      console.log('path in state', _this.state.MUTCD.serverImagePath);\n      var imgServerDown = window.location.origin + \"/img/PR-OTHER.png\";\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: _this.state.selMUTCD.serverImagePath,\n        className: \"SignEditorImage\",\n        alt: \"sign\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, _this.state.selMUTCD.code, \": \", _this.state.selMUTCD.name), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Tags:\", _this.state.selMUTCD.tags), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, _this.state.selMUTCD.isParking ? React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Parking Sign\") : \"\", _this.state.selMUTCD.isSpeedLimit ? React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Speed Limit Sign\") : \"\", _this.state.selMUTCD.isNonstandard ? React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Non-Standard Sign\") : \"\", _this.state.selMUTCD.needsArrow ? React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Requires Direction Arrow\") : \"\", _this.state.selMUTCD.needsTimeband ? React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Requires Time Restriction\") : \"\"));\n    };\n\n    _this.signTypes = new SignType();\n    _this.state = _objectSpread({}, _this.props.signs[_this.props.editSignIndex], _this.props.signs[_this.props.editSignIndex].feature, {\n      paneSelection: 1,\n      muttSelected: false,\n      showInfo: false,\n      selMUTCD: null\n    });\n    return _this;\n  }\n\n  _createClass(SignEditor, [{\n    key: \"render\",\n    value: function render() {\n      var imgServerDown = window.location.origin + \"/img/PR-OTHER.png\";\n      return React.createElement(ModalWrapper, Object.assign({}, this.props, {\n        title: \"Edit Support\",\n        width: 400,\n        showOk: this.props.showOk,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: this.state.paneSelection === 1 ? \"SignEditorOver\" : \"SignEditorUnder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"SignEditCancel\",\n        title: \"Close Window\",\n        onClick: this.cancelClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"X\"), React.createElement(\"div\", {\n        className: \"MUTCDdiv\",\n        onClick: this.muttSelectorOpenHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(Img, {\n        src: [this.state.MUTCD.serverImagePath, imgServerDown],\n        className: \"SignEditorImage\",\n        alt: \"sign\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"InnerMUTCD\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, this.state.MUTCD.code, \":\", this.state.MUTCD.name), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: window.location.origin + \"/img/\" + this.state.attributes.SIGNARROWDIRECTION + \".png\",\n        onClick: this.signDirectionClickHandler,\n        className: \"SignDirectionArrow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: this.state.paneSelection === 2 ? \"SignEditorOver\" : \"SignEditorUnder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"SignEditCancel\",\n        title: \"Close Window\",\n        onClick: this.cancelMUTCDselectHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"X\"), React.createElement(\"div\", {\n        className: \"TypeAheadDiv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(Typeahead, {\n        options: this.getOptions(),\n        maxVisible: 10,\n        onOptionSelected: this.mutcdLookUpSelectHandler,\n        placeholder: \"TYPE DESCRIPTION\",\n        disabled: this.state.showInfo,\n        inputProps: {\n          'size': 70\n        },\n        ref: myRef,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"\\\"Enter Partial Description or MUTCD\\\"\"), React.createElement(\"button\", {\n        disabled: this.state.showInfo,\n        onClick: this.cancelMUTCDselectHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"CANCEL\"), React.createElement(\"div\", {\n        className: this.state.showInfo ? \"MutcdInfoDiv\" : \"MutcdInfoDiv_hidden\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, this.state.selMUTCD ? this.readMUTCDinfo() : null, React.createElement(\"button\", {\n        onClick: this.muttSelectorSaveHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"SELECT\")), React.createElement(\"div\", {\n        className: \"SignEditButtonDiv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.cancelClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, \"CANCEL\"), React.createElement(\"button\", {\n        onClick: this.saveClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \"SAVE\"))), React.createElement(\"div\", {\n        className: this.state.paneSelection === 3 ? \"SignEditorOver\" : \"SignEditorUnder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"SignEditCancel\",\n        title: \"Close Window\",\n        onClick: this.cancelClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"X\"), \"SIGN ARROW DIRECTION SELECTOR TOOL\\u2122\", React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"img/6.png\",\n        class: \"dirSign\",\n        onClick: this.signArrowSelectHandler,\n        id: \"dir_6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"img/4.png\",\n        class: \"dirSign\",\n        id: \"dir_4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"img/8.png\",\n        class: \"dirSign\",\n        id: \"dir_8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"img/1.png\",\n        class: \"dirSign\",\n        id: \"dir_1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"img/3.png\",\n        class: \"dirSign\",\n        id: \"dir_3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"img/2.png\",\n        class: \"dirSign\",\n        id: \"dir_2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"img/7.png\",\n        class: \"dirSign\",\n        id: \"dir_7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"img/5.png\",\n        class: \"dirSign\",\n        id: \"dir_5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"img/9.png\",\n        class: \"dirSign\",\n        id: \"dir_9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"img/0.png\",\n        class: \"dirSign\",\n        id: \"dir_0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \"(no direction)\")))));\n    }\n  }]);\n\n  return SignEditor;\n}(Component);\n\nexport { SignEditor as default };","map":{"version":3,"sources":["C:\\Projects\\Signworks3\\src\\components\\myModules\\Signs\\SignEditor.js"],"names":["React","Component","call","Img","ModalWrapper","SignType","addOptionsToSelect","Typeahead","require","myRef","createRef","SignEditor","props","saveClickHandler","cancelClickHandler","modalClicked","muttSelectorOpenHandler","setState","paneSelection","showInfo","muttSelectorSaveHandler","MUTCD","state","selMUTCD","cancelMUTCDselectHandler","mutcdLookUpSelectHandler","desc","option","split","chosenOne","map","muttArray","find","element","code","cancelSelectionHandler","evt","getOptions","bob","i","length","push","name","signDirectionClickHandler","stopPropagation","signArrowSelectHandler","id","Number","target","charAt","readMUTCDinfo","console","log","serverImagePath","imgServerDown","window","location","origin","tags","isParking","isSpeedLimit","isNonstandard","needsArrow","needsTimeband","signTypes","signs","editSignIndex","feature","muttSelected","showOk","attributes","SIGNARROWDIRECTION"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport {call} from 'redux-saga/effects';\r\nimport Img from 'react-image'\r\nimport './SignEditor.css'\r\nimport ModalWrapper from '../Modals/ModalWrapper';\r\nimport {SignType, addOptionsToSelect} from '../../../SignworksJSON';\r\n\r\nlet Typeahead = require('react-typeahead').Typeahead;\r\n\r\nconst myRef = React.createRef();\r\nexport default class SignEditor extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n\r\n            ...this.props.signs[this.props.editSignIndex],\r\n            ...this.props.signs[this.props.editSignIndex].feature,\r\n            paneSelection: 1,\r\n            muttSelected: false,\r\n            showInfo: false,\r\n            selMUTCD: null\r\n\r\n        }\r\n\r\n    }\r\n\r\n    saveClickHandler = () => {\r\n        //gotta implement, this one saves the sign/timebands to the server\r\n\r\n    }\r\n\r\n    cancelClickHandler = () => {\r\n        //this cancels the editor window\r\n        this\r\n            .props\r\n            .modalClicked(false, null)\r\n    }\r\n\r\n    muttSelectorOpenHandler = () => {\r\n\r\n        this.setState({paneSelection: 2, showInfo: false})\r\n    }\r\n\r\n    muttSelectorSaveHandler = () => {\r\n        //\r\n\r\n        this.setState({paneSelection: 1, showInfo: false, MUTCD: this.state.selMUTCD})\r\n    }\r\n    cancelMUTCDselectHandler = () => {\r\n\r\n        this.setState({paneSelection: 1, showInfo: false})\r\n    }\r\n\r\n    mutcdLookUpSelectHandler = (desc) => {\r\n\r\n        let option = desc.split(':')\r\n\r\n        let chosenOne = this\r\n            .props\r\n            .map\r\n            .muttArray\r\n            .find(function (element) {\r\n                return element.code === option[0]\r\n            })\r\n        //myRef.current.focus();\r\n        this.setState({showInfo: true, selMUTCD: chosenOne})\r\n        //this.muttSelectorHandler()\r\n    }\r\n\r\n    cancelSelectionHandler = (evt) => {\r\n        this.setState({showInfo: false})\r\n    }\r\n\r\n    getOptions = () => {\r\n        let bob = [];\r\n        for (let i = 0; i < this.props.map.muttArray.length; i++) {\r\n            bob.push(this.props.map.muttArray[i].code + \": \" + this.props.map.muttArray[i].name)\r\n        }\r\n\r\n        return bob;\r\n\r\n    }\r\n    signDirectionClickHandler = (evt) => {\r\n\r\n        this.setState({paneSelection: 3})\r\n        evt.stopPropagation()\r\n    }\r\n\r\n    signArrowSelectHandler = (evt) => {\r\n        let id = Number(evt.target.id.charAt(4))\r\n      \r\n\r\n    }\r\n\r\n    readMUTCDinfo = () => {\r\n        // console.log('from store', this.state.MUTCD)  console.log('from state',\r\n        // this.state.selMUTCD)\r\n        console.log('path in state', this.state.MUTCD.serverImagePath)\r\n\r\n        const imgServerDown = window.location.origin + \"/img/PR-OTHER.png\"\r\n        return (\r\n            <div>\r\n                <img\r\n                    src={this.state.selMUTCD.serverImagePath}\r\n                    className=\"SignEditorImage\"\r\n                    alt=\"sign\"></img>\r\n                <div>{this.state.selMUTCD.code}\r\n                    : {this.state.selMUTCD.name}</div>\r\n                <div>Tags:{this.state.selMUTCD.tags}</div>\r\n\r\n                <ul>\r\n                    {this.state.selMUTCD.isParking\r\n                        ? <li>Parking Sign</li>\r\n                        : \"\"}\r\n                    {this.state.selMUTCD.isSpeedLimit\r\n                        ? <li>Speed Limit Sign</li>\r\n                        : \"\"}\r\n                    {this.state.selMUTCD.isNonstandard\r\n                        ? <li>Non-Standard Sign</li>\r\n                        : \"\"}\r\n                    {this.state.selMUTCD.needsArrow\r\n                        ? <li>Requires Direction Arrow</li>\r\n                        : \"\"}\r\n                    {this.state.selMUTCD.needsTimeband\r\n                        ? <li>Requires Time Restriction</li>\r\n                        : \"\"}\r\n\r\n                </ul>\r\n\r\n            </div>\r\n        )\r\n    }\r\n    /*\r\n    supportStatusChangeHandler = (evt) => {\r\n        this.setState({\r\n            \"SUPPORTSTATUS\": Number(evt.target.value)\r\n        })\r\n    }\r\n*/\r\n\r\n    signTypes = new SignType();\r\n\r\n    render() {\r\n        const imgServerDown = window.location.origin + \"/img/PR-OTHER.png\"\r\n        return (\r\n\r\n            <ModalWrapper\r\n                {...this.props}\r\n                title=\"Edit Support\"\r\n                width\r\n                ={400}\r\n                showOk={this.props.showOk}>\r\n\r\n                <div\r\n                    className={this.state.paneSelection === 1\r\n                    ? \"SignEditorOver\"\r\n                    : \"SignEditorUnder\"}>\r\n                    <div\r\n                        className=\"SignEditCancel\"\r\n                        title=\"Close Window\"\r\n                        onClick={this.cancelClickHandler}>X</div>\r\n                    <div className=\"MUTCDdiv\" onClick={this.muttSelectorOpenHandler}>\r\n                        <Img\r\n                            src={[this.state.MUTCD.serverImagePath, imgServerDown]}\r\n                            className=\"SignEditorImage\"\r\n                            alt=\"sign\"></Img>\r\n\r\n                        <span className=\"InnerMUTCD\">\r\n                            {this.state.MUTCD.code}:{this.state.MUTCD.name}\r\n\r\n                        </span>\r\n                        <span>\r\n                            <img\r\n                                src={window.location.origin + \"/img/\" + this.state.attributes.SIGNARROWDIRECTION + \".png\"}\r\n                                onClick={this.signDirectionClickHandler}\r\n                                className=\"SignDirectionArrow\"></img>\r\n                        </span>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n                <div\r\n                    className={this.state.paneSelection === 2\r\n                    ? \"SignEditorOver\"\r\n                    : \"SignEditorUnder\"}>\r\n                    <div\r\n                        className=\"SignEditCancel\"\r\n                        title=\"Close Window\"\r\n                        onClick={this.cancelMUTCDselectHandler}>X</div>\r\n                    <div className=\"TypeAheadDiv\">\r\n                        <Typeahead\r\n                            options={this.getOptions()}\r\n                            maxVisible={10}\r\n                            onOptionSelected={this.mutcdLookUpSelectHandler}\r\n                            placeholder=\"TYPE DESCRIPTION\"\r\n                            disabled={this.state.showInfo}\r\n                            inputProps={{\r\n                            'size': 70\r\n                        }}\r\n                            ref={myRef}/>\r\n                    </div>\r\n\r\n                    <p>\r\n                        \"Enter Partial Description or MUTCD\"</p>\r\n\r\n                    <button disabled={this.state.showInfo} onClick={this.cancelMUTCDselectHandler}>\r\n                        CANCEL</button>\r\n                    <div\r\n                        className={this.state.showInfo\r\n                        ? \"MutcdInfoDiv\"\r\n                        : \"MutcdInfoDiv_hidden\"}>\r\n\r\n                        {this.state.selMUTCD\r\n                            ? this.readMUTCDinfo()\r\n                            : null}\r\n                        <button onClick={this.muttSelectorSaveHandler}>SELECT</button>\r\n\r\n                    </div>\r\n                    <div className=\"SignEditButtonDiv\">\r\n                        <button onClick={this.cancelClickHandler}>CANCEL</button>\r\n                        <button onClick={this.saveClickHandler}>SAVE</button>\r\n                    </div>\r\n                </div>\r\n                <div\r\n                    className={this.state.paneSelection === 3\r\n                    ? \"SignEditorOver\"\r\n                    : \"SignEditorUnder\"}>\r\n                    <div\r\n                        className=\"SignEditCancel\"\r\n                        title=\"Close Window\"\r\n                        onClick={this.cancelClickHandler}>X</div>\r\n                    SIGN ARROW DIRECTION SELECTOR TOOLâ„¢<table>\r\n                        <tr>\r\n                            <td><img\r\n                                src=\"img/6.png\"\r\n                                class=\"dirSign\"\r\n                                onClick={this.signArrowSelectHandler}\r\n                                id=\"dir_6\"/></td>\r\n                            <td><img src=\"img/4.png\" class=\"dirSign\" id=\"dir_4\"/></td>\r\n                            <td><img src=\"img/8.png\" class=\"dirSign\" id=\"dir_8\"/>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td><img src=\"img/1.png\" class=\"dirSign\" id=\"dir_1\"/></td>\r\n                            <td><img src=\"img/3.png\" class=\"dirSign\" id=\"dir_3\"/></td>\r\n                            <td><img src=\"img/2.png\" class=\"dirSign\" id=\"dir_2\"/>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td><img src=\"img/7.png\" class=\"dirSign\" id=\"dir_7\"/></td>\r\n                            <td><img src=\"img/5.png\" class=\"dirSign\" id=\"dir_5\"/></td>\r\n                            <td><img src=\"img/9.png\" class=\"dirSign\" id=\"dir_9\"/>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td><img src=\"img/0.png\" class=\"dirSign\" id=\"dir_0\"/></td>\r\n                            <td>(no direction)\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n            </ModalWrapper>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}