{"ast":null,"code":"import { parkingtypesigns, mphSigns } from \"../../../SignworksJSON\"; // newCode is the mutcd.code that is being checked signs -  an array of signs on\n// the signpost each sign should have a property called MUTCD that has the info\n// from the sign catalog\n\nexport function MutcdDuplicate(newCode, signs) {\n  var isDupe = false;\n\n  for (var i = 0; i < signs.length; i++) {\n    if (signs[i].MUTCD.code === newCode) {\n      isDupe = true;\n    }\n  }\n\n  return isDupe;\n}\nexport function isSpeedLimit(mutt) {\n  mutt = mutt.toUpperCase();\n  var speedy = mphSigns.find(function (code) {\n    if (code === mutt) {\n      return mutt;\n    }\n  });\n\n  if (speedy) {\n    return \"\";\n  } else return \"disabled\";\n}\n\nfunction zoneVerify(props) {\n  //assemble zone\n  var zoneValue = props.ward1 + props.anc1;\n\n  if (props.ward2) {\n    zoneValue += \"&\" + props.ward2 + props.anc2;\n  } else if (props.anc2) {\n    // you've got a anc with no ward\n    return flagZone;\n  } // alert(zoneValue);\n  // verify zone with same script as python server side\n  // this algorithm is overly rigorous since unlike the server side, the zone value is constrained by input controls.  But it should work and might be needed later\n\n\n  if (zoneValue == \"\" || !zoneValue) {\n    // this was an error before , but having an empty value is ok\n    return 0;\n  }\n\n  if (zoneValue.length < 1) {\n    return flagZone;\n  }\n\n  if (ward.test(zoneValue[0])) {\n    // we have a ward in first position\n    if (zoneValue.length < 2) {\n      // it was just a single ward\n      return 0;\n    }\n\n    if (amp.test(zoneValue[1])) {\n      //single digit ward and ...\n      if (ward.test(zoneValue[2])) {\n        //single digit ward and ward and ...\n        if (zoneValue.length < 4) {\n          //single digit ward and single digit ward and done\n          return 0;\n        }\n\n        if (anc.test(zoneValue[3])) {\n          // single digit ward and ward+anc and done\n          return 0;\n        } else {\n          //single digit ward and some garbage\n          return flagZone;\n        }\n      }\n    } else if (anc.test(zoneValue[1])) {\n      // ward + anc\n      if (zoneValue.length < 3) {\n        // ward + anc and done\n        return 0;\n      } else if (amp.test(zoneValue[2])) {\n        // ward + anc and ...\n        if (zoneValue.length < 4) {\n          // oops, nothing after the ampersand\n          // we could just fix it here clip the ampersand\n          return flagZone;\n        } else if (ward.test(zoneValue[3])) {\n          // ward + anc and ward and ...\n          if (zoneValue.length < 5) {\n            // ward + anc and single digit ward and done\n            return 0;\n          } else if (zoneValue.length > 5) {\n            // too many characters  - - shouldn't happen here but check anyway\n            return flagZone;\n          } else if (anc.test(zoneValue[4])) {\n            // ward + anc and ward = anc and done\n            return 0;\n          } else {\n            // ward + anc + ward + garbage\n            return flagZone;\n          }\n        } else {\n          // ward + anc + ampersand + garbage\n          return flagZone;\n        }\n      } else {\n        // ward + anc + garbage\n        return flagZone;\n      }\n    } else {\n      //ward + garbage\n      return flagZone;\n    }\n  } else {\n    //garbage from the get go\n    return flagZone;\n  } //should never get here\n\n\n  return -1;\n}\n\n;\n/*\r\nfunction zoneCheck (evt) {\r\n\r\n\r\n    if (props.ward1 != \"\") {\r\n        $anc1.attr('disabled', false);\r\n    }\r\n    else {\r\n        $anc1.attr('disabled', true);\r\n        $anc1.val(\"\");\r\n    }\r\n    if (props.ward2 != \"\") {\r\n        $anc2.attr('disabled', false);\r\n    }\r\n    else {\r\n        $anc2.attr('disabled', true);\r\n        $anc2.val(\"\");\r\n    }\r\n    var err = zoneVerify(false);\r\n    if (err) {\r\n        $zoneDiv.removeClass(\"edit_div\");\r\n        $zoneDiv.addClass(\"edit_div_err\");\r\n        verify(flagOR, flagZone);\r\n    }\r\n    else {\r\n        $zoneDiv.removeClass(\"edit_div_err\");\r\n        $zoneDiv.addClass(\"edit_div\");\r\n        verify(flagORX, flagZone);\r\n        feature.attributes.ZONE_ID = zoneValue;\r\n    }\r\n}\r\n*/","map":{"version":3,"sources":["C:\\Projects\\Signworks3\\src\\components\\myModules\\Signs\\SignValidations.js"],"names":["parkingtypesigns","mphSigns","MutcdDuplicate","newCode","signs","isDupe","i","length","MUTCD","code","isSpeedLimit","mutt","toUpperCase","speedy","find","zoneVerify","props","zoneValue","ward1","anc1","ward2","anc2","flagZone","ward","test","amp","anc"],"mappings":"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","sourcesContent":["import {parkingtypesigns, mphSigns} from \"../../../SignworksJSON\";\r\n\r\n// newCode is the mutcd.code that is being checked signs -  an array of signs on\r\n// the signpost each sign should have a property called MUTCD that has the info\r\n// from the sign catalog\r\nexport function MutcdDuplicate(newCode, signs) {\r\n\r\n    let isDupe = false;\r\n    for (let i = 0; i < signs.length; i++) {\r\n        if (signs[i].MUTCD.code === newCode) {\r\n            isDupe = true;\r\n        }\r\n    }\r\n   \r\n    return isDupe\r\n}\r\n\r\nexport function isSpeedLimit(mutt) {\r\n    mutt = mutt.toUpperCase();\r\n    const speedy = mphSigns.find((code) => {\r\n       \r\n        if (code === mutt) {\r\n            return mutt;\r\n        }\r\n    })\r\n   \r\nif (speedy){\r\n    return \"\"\r\n}\r\nelse\r\n    return \"disabled\";\r\n\r\n}\r\n\r\nfunction zoneVerify (props) {\r\n\r\n\r\n    \r\n        //assemble zone\r\n      let  zoneValue = props.ward1 + props.anc1;\r\n        if (props.ward2) {\r\n            zoneValue += \"&\" + props.ward2 + props.anc2;\r\n        }\r\n        else if (props.anc2) {\r\n            // you've got a anc with no ward\r\n            return flagZone;\r\n\r\n        }\r\n    \r\n\r\n\r\n\r\n\r\n    // alert(zoneValue);\r\n    // verify zone with same script as python server side\r\n    // this algorithm is overly rigorous since unlike the server side, the zone value is constrained by input controls.  But it should work and might be needed later\r\n   \r\n    if (zoneValue == \"\" || !zoneValue) {\r\n        // this was an error before , but having an empty value is ok\r\n        return 0;\r\n    }\r\n    if (zoneValue.length < 1) {\r\n        return flagZone;\r\n    }\r\n    \r\n    if (ward.test(zoneValue[0])) {\r\n        // we have a ward in first position\r\n        if (zoneValue.length < 2) {\r\n            // it was just a single ward\r\n            return 0;\r\n        }\r\n        if (amp.test(zoneValue[1])) {\r\n            //single digit ward and ...\r\n            if (ward.test(zoneValue[2])) {\r\n                //single digit ward and ward and ...\r\n                if (zoneValue.length < 4) {\r\n                    //single digit ward and single digit ward and done\r\n                    return 0;\r\n                }\r\n                if (anc.test(zoneValue[3])) {\r\n                    // single digit ward and ward+anc and done\r\n                    return 0;\r\n                }\r\n                else {\r\n                    //single digit ward and some garbage\r\n                    return flagZone;\r\n                }\r\n            }\r\n        }\r\n        else if (anc.test(zoneValue[1])) {\r\n            // ward + anc\r\n            if (zoneValue.length < 3) {\r\n                // ward + anc and done\r\n                return 0;\r\n            }\r\n            else if (amp.test(zoneValue[2])) {\r\n                // ward + anc and ...\r\n                if (zoneValue.length < 4) {\r\n                    // oops, nothing after the ampersand\r\n                    // we could just fix it here clip the ampersand\r\n                    return flagZone;\r\n                }\r\n                else if (ward.test(zoneValue[3])) {\r\n                    // ward + anc and ward and ...\r\n                    if (zoneValue.length < 5) {\r\n                        // ward + anc and single digit ward and done\r\n                        return 0;\r\n                    }\r\n                    else if (zoneValue.length > 5) {\r\n                        // too many characters  - - shouldn't happen here but check anyway\r\n                        return flagZone;\r\n                    }\r\n                    else if (anc.test(zoneValue[4])) {\r\n                        // ward + anc and ward = anc and done\r\n                        return 0;\r\n                    }\r\n                    else {\r\n                        // ward + anc + ward + garbage\r\n                        return flagZone;\r\n                    }\r\n                }\r\n                else {\r\n                    // ward + anc + ampersand + garbage\r\n                    return flagZone;\r\n                }\r\n            }\r\n            else {\r\n                // ward + anc + garbage\r\n                return flagZone;\r\n            }\r\n        }\r\n        else {\r\n            //ward + garbage\r\n            return flagZone;\r\n        }\r\n\r\n\r\n\r\n    }\r\n    else {\r\n        //garbage from the get go\r\n        return flagZone;\r\n    }\r\n    //should never get here\r\n    return -1;\r\n};\r\n\r\n\r\n/*\r\nfunction zoneCheck (evt) {\r\n\r\n\r\n    if (props.ward1 != \"\") {\r\n        $anc1.attr('disabled', false);\r\n    }\r\n    else {\r\n        $anc1.attr('disabled', true);\r\n        $anc1.val(\"\");\r\n    }\r\n    if (props.ward2 != \"\") {\r\n        $anc2.attr('disabled', false);\r\n    }\r\n    else {\r\n        $anc2.attr('disabled', true);\r\n        $anc2.val(\"\");\r\n    }\r\n    var err = zoneVerify(false);\r\n    if (err) {\r\n        $zoneDiv.removeClass(\"edit_div\");\r\n        $zoneDiv.addClass(\"edit_div_err\");\r\n        verify(flagOR, flagZone);\r\n    }\r\n    else {\r\n        $zoneDiv.removeClass(\"edit_div_err\");\r\n        $zoneDiv.addClass(\"edit_div\");\r\n        verify(flagORX, flagZone);\r\n        feature.attributes.ZONE_ID = zoneValue;\r\n    }\r\n}\r\n*/"]},"metadata":{},"sourceType":"module"}